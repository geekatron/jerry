# ORCHESTRATION_PLAN.md

> **Document ID:** PROJ-001-ORCH-PLAN
> **Project:** PROJ-001
> **Workflow ID:** `feat015-licmig-20260217-001`
> **Status:** ACTIVE
> **Version:** 2.0
> **Created:** 2026-02-17
> **Last Updated:** 2026-02-17

> **Disclaimer:** This plan is generated by the orch-planner agent (v2.2.0). It reflects state as of creation date. Execution agents must re-read `ORCHESTRATION.yaml` for current state at each session start.

---

## Document Sections

| Section | Purpose |
|---------|---------|
| [Executive Summary](#1-executive-summary) | Workflow purpose, pattern, and identification |
| [Workflow Architecture](#2-workflow-architecture) | Pipeline diagram and pattern classification |
| [Phase Definitions](#3-phase-definitions) | All phases with agents and quality gates |
| [Quality Gate Protocol](#4-quality-gate-protocol) | Adversary integration at each gate |
| [Agent Registry](#5-agent-registry) | All agents across all phases |
| [State Management](#6-state-management) | Files, artifact paths, checkpoints |
| [Execution Constraints](#7-execution-constraints) | Hard and soft constraints |
| [Success Criteria](#8-success-criteria) | Phase exit criteria and workflow completion |
| [Risk Mitigations](#9-risk-mitigations) | Identified risks and mitigations |
| [Resumption Context](#10-resumption-context) | Current state and next actions |

---

## 1. Executive Summary

Migrate the Jerry Framework's license from MIT to Apache License 2.0. The migration spans 6 enablers across the repository: a dependency compatibility audit, license file replacement, NOTICE file creation, packaging metadata update, source file header notices for all `.py` files, and CI header validation enforcement.

The migration is publicly visible (affects all users and contributors) and touches over 50 files. While technically reversible via git, the public perception dimension elevates care requirements.

**Current State:** Not started. Workflow initialized. Phase 1 (Audit) is ready to execute.

**Orchestration Pattern:** Sequential Pipeline with Checkpoints (Pattern 2). Single pipeline (`lic`), 4 phases, quality gates between each phase. No cross-pollination needed.

**Criticality:** C2 (Standard) — public-facing, >10 files, technically reversible within 1 day.

### 1.1 Workflow Identification

| Field | Value | Source |
|-------|-------|--------|
| Workflow ID | `feat015-licmig-20260217-001` | auto |
| ID Format | `{purpose}-{YYYYMMDD}-{NNN}` | semantic-date-seq |
| Base Path | `orchestration/feat015-licmig-20260217-001/` | Dynamic |

**Artifact Output Locations:**
- Pipeline: `orchestration/feat015-licmig-20260217-001/lic/`
- Quality Gates: `orchestration/feat015-licmig-20260217-001/lic/quality-gates/`

---

## 2. Workflow Architecture

### 2.1 Pipeline Diagram

```
FEAT-015 LICENSE MIGRATION — Sequential Pipeline with Quality Gates
===================================================================

┌─────────────────────────────────────────────────────────────────┐
│  PHASE 1: DEPENDENCY AUDIT                                      │
│  ─────────────────────────────────────────────────────────────  │
│  • EN-934: Dependency License Compatibility Audit               │
│  • Agents: audit-executor                                       │
│  • Status: PENDING                                              │
└───────────────────────────────┬─────────────────────────────────┘
                                │
                                ▼
        ╔═══════════════════════════════════════════╗
        ║  QUALITY GATE 1 (QG-1)                    ║
        ║  ──────────────────────────────────────── ║
        ║  adv-scorer   (S-014 LLM-as-Judge)        ║
        ║  adv-executor (S-007 Constitutional)      ║
        ║  adv-executor (S-002 Devil's Advocate)    ║
        ║  Threshold: >= 0.92                        ║
        ║  STATUS: PENDING                           ║
        ╚═══════════════════════════════════════════╝
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│  PHASE 2: CORE LICENSE CHANGES (Parallel Enablers)             │
│  ─────────────────────────────────────────────────────────────  │
│  • EN-930: License File Replacement                             │
│  • EN-931: NOTICE File Creation                                 │
│  • EN-933: Packaging Metadata Update                            │
│  • Agents: license-replacer, notice-creator, metadata-updater  │
│  • Execution: PARALLEL (no inter-dependency)                    │
│  • Status: BLOCKED (by QG-1)                                    │
└───────────────────────────────┬─────────────────────────────────┘
                                │
                                ▼
        ╔═══════════════════════════════════════════╗
        ║  QUALITY GATE 2 (QG-2)                    ║
        ║  ──────────────────────────────────────── ║
        ║  adv-scorer   (S-014 LLM-as-Judge)        ║
        ║  adv-executor (S-007 Constitutional)      ║
        ║  adv-executor (S-002 Devil's Advocate)    ║
        ║  Threshold: >= 0.92                        ║
        ║  STATUS: PENDING                           ║
        ╚═══════════════════════════════════════════╝
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│  PHASE 3: SOURCE FILE HEADER NOTICES                            │
│  ─────────────────────────────────────────────────────────────  │
│  • EN-932: Add SPDX header to ALL .py files                     │
│  • Agents: header-applicator, header-verifier                   │
│  • Status: BLOCKED (by QG-2)                                    │
└───────────────────────────────┬─────────────────────────────────┘
                                │
                                ▼
        ╔═══════════════════════════════════════════╗
        ║  QUALITY GATE 3 (QG-3)                    ║
        ║  ──────────────────────────────────────── ║
        ║  adv-scorer   (S-014 LLM-as-Judge)        ║
        ║  adv-executor (S-007 Constitutional)      ║
        ║  adv-executor (S-002 Devil's Advocate)    ║
        ║  Threshold: >= 0.92                        ║
        ║  STATUS: PENDING                           ║
        ╚═══════════════════════════════════════════╝
                                │
                                ▼
┌─────────────────────────────────────────────────────────────────┐
│  PHASE 4: CI LICENSE HEADER VALIDATION                          │
│  ─────────────────────────────────────────────────────────────  │
│  • EN-935: Pre-commit hook + CI check for headers               │
│  • Agents: ci-validator-implementer, ci-validator-tester        │
│  • Status: BLOCKED (by QG-3)                                    │
└───────────────────────────────┬─────────────────────────────────┘
                                │
                                ▼
        ╔═══════════════════════════════════════════╗
        ║  QUALITY GATE FINAL (QG-FINAL)            ║
        ║  ──────────────────────────────────────── ║
        ║  adv-scorer   (S-014 LLM-as-Judge)        ║
        ║  adv-executor (S-007 Constitutional)      ║
        ║  adv-executor (S-002 Devil's Advocate)    ║
        ║  Scores entire FEAT-015 deliverable set   ║
        ║  Threshold: >= 0.92                        ║
        ║  STATUS: PENDING                           ║
        ╚═══════════════════════════════════════════╝
                                │
                                ▼
                     [ FEAT-015 COMPLETE ]
```

### 2.2 Orchestration Pattern Classification

| Pattern | Applied | Description |
|---------|---------|-------------|
| Sequential | Yes | Phases 1 through 4 execute in order, gated by quality gates |
| Concurrent | Partial | Phase 2 enablers (EN-930, EN-931, EN-933) run in parallel |
| Barrier Sync | No | Single pipeline — no cross-pollination needed |
| Hierarchical | Yes | Orchestrator delegates to execution agents |

---

## 3. Phase Definitions

### 3.1 Phase Overview

| Phase | Name | Enabler(s) | Effort | Agents | Gate After | Status |
|-------|------|-----------|--------|--------|------------|--------|
| 1 | Dependency Audit | EN-934 | 3 | audit-executor | QG-1 | PENDING |
| 2 | Core License Changes | EN-930, EN-931, EN-933 | 3 | license-replacer, notice-creator, metadata-updater | QG-2 | BLOCKED |
| 3 | Source File Headers | EN-932 | 5 | header-applicator, header-verifier | QG-3 | BLOCKED |
| 4 | CI Validation | EN-935 | 3 | ci-validator-implementer, ci-validator-tester | QG-FINAL | BLOCKED |

### 3.2 Phase 1: Dependency Audit (EN-934)

**Purpose:** Audit all dependencies in `pyproject.toml` and lock files for Apache 2.0 compatibility. This phase MUST complete successfully before any code changes are made. If incompatible dependencies are found, the workflow is blocked pending resolution.

**Execution Mode:** SEQUENTIAL (single enabler)

**Key Deliverables:**
- `orchestration/feat015-licmig-20260217-001/lic/phase-1-audit/audit-executor/audit-executor-dep-audit.md` — Full dependency audit report
- Inventory: all direct and transitive deps with their licenses
- Verdict: PASS (all compat) or BLOCK (incompatible deps found)

**Exit Criteria:**
- All dependencies surveyed with license identified
- Compatibility verdict rendered (Apache 2.0 compat or not)
- Any incompatible deps flagged with resolution options
- QG-1 score >= 0.92

### 3.3 Phase 2: Core License Changes (EN-930, EN-931, EN-933)

**Purpose:** Apply the three atomic, low-risk core license changes in parallel: replace the LICENSE file, create the NOTICE file, and update pyproject.toml metadata.

**Execution Mode:** PARALLEL (three independent enablers)

**Dependency:** Phase 1 QG-1 must PASS first.

**Key Deliverables:**
- `orchestration/feat015-licmig-20260217-001/lic/phase-2-core/license-replacer/license-replacer-output.md` — LICENSE file replacement report
- `orchestration/feat015-licmig-20260217-001/lic/phase-2-core/notice-creator/notice-creator-output.md` — NOTICE file creation report
- `orchestration/feat015-licmig-20260217-001/lic/phase-2-core/metadata-updater/metadata-updater-output.md` — pyproject.toml update report
- Actual file changes: `LICENSE`, `NOTICE`, `pyproject.toml`

**Exit Criteria:**
- `LICENSE` contains the full Apache 2.0 text (canonical, unmodified)
- `NOTICE` file exists with correct project attribution per Section 4(d)
- `pyproject.toml` `license` field updated to `"Apache-2.0"`
- QG-2 score >= 0.92

### 3.4 Phase 3: Source File Header Notices (EN-932)

**Purpose:** Add SPDX-format Apache 2.0 copyright header to all `.py` files across `src/`, `scripts/`, `hooks/`, and `tests/`. This is the highest-effort phase (~50+ files).

**Execution Mode:** SEQUENTIAL (single enabler, bulk file operation)

**Dependency:** Phase 1 QG-1 must PASS first (needs audit confirmation of compat).

**Header Template:**
```python
# SPDX-License-Identifier: Apache-2.0
# Copyright (c) 2026 Adam Nowak
```

**Special Cases:**
- Files with shebangs (`#!/usr/bin/env python3`): header goes AFTER the shebang line
- `__init__.py` files: header included
- Generated files (if any): document decision per file

**Key Deliverables:**
- `orchestration/feat015-licmig-20260217-001/lic/phase-3-headers/header-applicator/header-applicator-output.md` — Files modified inventory
- `orchestration/feat015-licmig-20260217-001/lic/phase-3-headers/header-verifier/header-verifier-output.md` — Verification scan results
- Actual changes: SPDX headers in all `.py` files

**Exit Criteria:**
- 100% of `.py` files have SPDX header (zero exceptions without documented justification)
- Shebang handling correct (header after shebang, not before)
- Tests still pass (no import or syntax regressions)
- QG-3 score >= 0.92

### 3.5 Phase 4: CI License Header Validation (EN-935)

**Purpose:** Implement enforcement layer — pre-commit hook and CI check — so that future `.py` files automatically require the SPDX header. Prevents license header drift.

**Execution Mode:** SEQUENTIAL (two sub-tasks: implement, then test)

**Dependency:** Phase 3 QG-3 must PASS first (all headers must be present before CI enforces them).

**Key Deliverables:**
- `orchestration/feat015-licmig-20260217-001/lic/phase-4-ci/ci-validator-implementer/ci-validator-implementer-output.md` — Pre-commit config and CI step implementation report
- `orchestration/feat015-licmig-20260217-001/lic/phase-4-ci/ci-validator-tester/ci-validator-tester-output.md` — Validation test results (hook fires correctly, CI passes)
- Actual changes: `.pre-commit-config.yaml` or equivalent, CI workflow update

**Exit Criteria:**
- Pre-commit hook configured and functional
- CI pipeline includes header check step
- Hook correctly catches a file missing the header (negative test)
- Hook correctly passes files with the header (positive test)
- QG-FINAL score >= 0.92

---

## 4. Quality Gate Protocol

### 4.1 Adversary Integration (C2 Required Strategies)

For each quality gate, the `/adversary` skill agents execute against phase deliverables:

| Strategy | Agent | Purpose | C2 Required? |
|----------|-------|---------|--------------|
| S-014 LLM-as-Judge | adv-scorer | Composite quality score across 6 dimensions | REQUIRED |
| S-007 Constitutional AI Critique | adv-executor | Apache 2.0 legal compliance check | REQUIRED |
| S-002 Devil's Advocate | adv-executor | Challenge completeness assumptions | REQUIRED |
| S-003 Steelman | adv-executor | Strengthen findings before critique (H-16) | OPTIONAL |
| S-010 Self-Refine | adv-executor | Pre-submission self-correction | OPTIONAL |

**H-16 Ordering:** If S-003 (Steelman) is applied, it MUST precede S-002 (Devil's Advocate).

### 4.2 Gate Definitions

| Gate | After Phase | Deliverables Scored | Max Iterations | Threshold |
|------|-------------|---------------------|----------------|-----------|
| QG-1 | Phase 1 (Audit) | EN-934 audit report | 3 | >= 0.92 |
| QG-2 | Phase 2 (Core) | EN-930, EN-931, EN-933 batch | 3 | >= 0.92 |
| QG-3 | Phase 3 (Headers) | EN-932 header application | 3 | >= 0.92 |
| QG-FINAL | Phase 4 (CI) | Entire FEAT-015 deliverable set | 3 | >= 0.92 |

### 4.3 Gate Execution Protocol

```
FOR EACH QUALITY GATE:

1. PRE-GATE CHECK
   □ All phase agents have completed execution
   □ All phase artifacts exist at expected paths
   □ No blocking errors or unresolved issues

2. ADVERSARY EXECUTION (C2 required strategies)
   □ adv-scorer runs S-014 against phase deliverables → composite score
   □ adv-executor runs S-007 → Apache 2.0 legal compliance verdict
   □ adv-executor runs S-002 → Devil's Advocate challenge list
   □ [Optional] adv-executor runs S-003 BEFORE S-002 if applied

3. GATE DECISION
   IF score >= 0.92:
     → PASS: Proceed to next phase
   ELIF score >= 0.85:
     → REVISE band: Targeted revision, re-run gate (max 3 iterations)
   ELSE:
     → REJECTED: Significant rework required, re-run gate

4. GATE ARTIFACT
   □ Save gate result to:
      orchestration/feat015-licmig-20260217-001/lic/quality-gates/{gate-id}/gate-result.md
   □ Update ORCHESTRATION.yaml quality section
   □ Update WORKTRACKER.md

5. MAX ITERATION GUARD
   IF iteration_count >= 3 AND score < 0.92:
     → Escalate to user (P-020: User Authority)
```

### 4.4 S-014 Scoring Dimensions (Quality Gate Rubric)

| Dimension | Weight | Application to FEAT-015 |
|-----------|--------|------------------------|
| Completeness | 0.20 | All files covered? All deps audited? |
| Internal Consistency | 0.20 | License text unmodified? SPDX IDs consistent? |
| Methodological Rigor | 0.20 | Audit methodology sound? Shebang handling correct? |
| Evidence Quality | 0.15 | Dep licenses sourced from authoritative refs? |
| Actionability | 0.15 | Any blocking findings have resolution paths? |
| Traceability | 0.10 | Changes traceable back to enabler IDs? |

---

## 5. Agent Registry

### 5.1 Phase 1 Agents

| Agent ID | Phase | Role | Input Artifacts | Output Artifacts | Status |
|----------|-------|------|-----------------|------------------|--------|
| audit-executor | 1 | Execute EN-934 dep audit | `pyproject.toml`, lock files | `audit-executor-dep-audit.md` | PENDING |

### 5.2 Phase 2 Agents

| Agent ID | Phase | Role | Input Artifacts | Output Artifacts | Status |
|----------|-------|------|-----------------|------------------|--------|
| license-replacer | 2 | Execute EN-930: replace LICENSE file | Current `LICENSE`, Apache 2.0 text | `license-replacer-output.md`, updated `LICENSE` | BLOCKED |
| notice-creator | 2 | Execute EN-931: create NOTICE file | Project metadata | `notice-creator-output.md`, new `NOTICE` | BLOCKED |
| metadata-updater | 2 | Execute EN-933: update pyproject.toml | `pyproject.toml` | `metadata-updater-output.md`, updated `pyproject.toml` | BLOCKED |

### 5.3 Phase 3 Agents

| Agent ID | Phase | Role | Input Artifacts | Output Artifacts | Status |
|----------|-------|------|-----------------|------------------|--------|
| header-applicator | 3 | Execute EN-932: apply SPDX headers to all `.py` files | All `.py` files in src/, scripts/, hooks/, tests/ | `header-applicator-output.md`, modified `.py` files | BLOCKED |
| header-verifier | 3 | Verify 100% coverage after header-applicator | Modified `.py` files | `header-verifier-output.md` | BLOCKED |

### 5.4 Phase 4 Agents

| Agent ID | Phase | Role | Input Artifacts | Output Artifacts | Status |
|----------|-------|------|-----------------|------------------|--------|
| ci-validator-implementer | 4 | Execute EN-935: implement pre-commit + CI check | `.pre-commit-config.yaml`, CI workflow files | `ci-validator-implementer-output.md`, updated config files | BLOCKED |
| ci-validator-tester | 4 | Validate the CI enforcement works correctly | Implemented hook/CI config | `ci-validator-tester-output.md` | BLOCKED |

### 5.5 Quality Gate Agents (All Gates)

| Agent ID | Gates | Role | Strategy |
|----------|-------|------|----------|
| adv-scorer | QG-1, QG-2, QG-3, QG-FINAL | S-014 LLM-as-Judge composite scoring | S-014 |
| adv-executor | QG-1, QG-2, QG-3, QG-FINAL | S-007 Constitutional AI Critique | S-007 |
| adv-executor | QG-1, QG-2, QG-3, QG-FINAL | S-002 Devil's Advocate challenge | S-002 |

---

## 6. State Management

### 6.1 State Files

| File | Purpose |
|------|---------|
| `projects/PROJ-001-oss-release/ORCHESTRATION.yaml` | Machine-readable state (SSOT) |
| `projects/PROJ-001-oss-release/ORCHESTRATION_PLAN.md` | This file — strategic context |
| `projects/PROJ-001-oss-release/WORKTRACKER.md` | Tactical execution documentation |

### 6.2 Artifact Path Structure

All artifacts are stored under the workflow's base path using dynamic identifiers:

```
orchestration/feat015-licmig-20260217-001/
└── lic/
    ├── phase-1-audit/
    │   └── audit-executor/
    │       └── audit-executor-dep-audit.md
    ├── phase-2-core/
    │   ├── license-replacer/
    │   │   └── license-replacer-output.md
    │   ├── notice-creator/
    │   │   └── notice-creator-output.md
    │   └── metadata-updater/
    │       └── metadata-updater-output.md
    ├── phase-3-headers/
    │   ├── header-applicator/
    │   │   └── header-applicator-output.md
    │   └── header-verifier/
    │       └── header-verifier-output.md
    ├── phase-4-ci/
    │   ├── ci-validator-implementer/
    │   │   └── ci-validator-implementer-output.md
    │   └── ci-validator-tester/
    │       └── ci-validator-tester-output.md
    └── quality-gates/
        ├── qg-1/
        │   └── gate-result.md
        ├── qg-2/
        │   └── gate-result.md
        ├── qg-3/
        │   └── gate-result.md
        └── qg-final/
            └── gate-result.md
```

**Note:** All paths above are relative to `projects/PROJ-001-oss-release/`.

### 6.3 Checkpoint Strategy

| Trigger | When | Purpose |
|---------|------|---------|
| PHASE_COMPLETE | After each phase completes (before gate) | Phase-level rollback |
| GATE_PASS | After each quality gate passes | Post-gate recovery |
| MANUAL | User-triggered | Debug and inspection |

---

## 7. Execution Constraints

### 7.1 Hard Constraints (Jerry Constitution)

| Constraint | ID | Enforcement |
|------------|----|----|
| Single agent nesting | P-003 | Orchestrator -> Worker only. No recursive subagents. |
| File persistence | P-002 | All state to filesystem immediately |
| No deception | P-022 | Transparent reasoning in all outputs |
| User authority | P-020 | User approves gates when max iterations reached |

### 7.1.1 Worktracker Entity Templates

> **WTI-007:** Entity files (EPIC, FEATURE, ENABLER, TASK, etc.) created during orchestration MUST use canonical templates from `.context/templates/worktracker/`. Read the appropriate template first, then populate. Do not create entity files from memory or by copying other instance files.

### 7.2 Quality Constraints

| Constraint | Value | Source |
|------------|-------|--------|
| Quality threshold | >= 0.92 | H-13 |
| Min creator-critic iterations | 3 | H-14 |
| Self-review before presenting | Required | H-15 |
| Steelman before critique | Required (if applied) | H-16 |
| Quality scoring required | S-014 at all gates | H-17 |
| Constitutional check required | S-007 at all gates | H-18 |

### 7.3 Soft Constraints

| Constraint | Value | Rationale |
|------------|-------|-----------|
| Max concurrent agents | 3 | Phase 2 has 3 parallel agents; resource management |
| Max gate retries | 3 | H-14 minimum; circuit breaker at 3 |
| Checkpoint frequency | PHASE + GATE | Recovery granularity |

---

## 8. Success Criteria

### 8.1 Phase 1 (Audit) Exit Criteria

| Criterion | Validation |
|-----------|------------|
| All direct dependencies have identified licenses | Audit report lists all deps in pyproject.toml |
| Transitive dependencies surveyed | Known transitive dep licenses documented |
| Apache 2.0 compatibility verdict rendered | Report contains explicit PASS or BLOCK verdict |
| Incompatible deps (if any) have resolution paths | Each incompatible dep has documented option |
| QG-1 passes | adv-scorer composite score >= 0.92 |

### 8.2 Phase 2 (Core Changes) Exit Criteria

| Criterion | Validation |
|-----------|------------|
| LICENSE file contains canonical Apache 2.0 text | Byte-for-byte check against apache.org source |
| NOTICE file exists and is correctly formatted | Section 4(d) requirements met |
| pyproject.toml `license` field = `"Apache-2.0"` | Verify in toml parser output |
| QG-2 passes | adv-scorer composite score >= 0.92 |

### 8.3 Phase 3 (Headers) Exit Criteria

| Criterion | Validation |
|-----------|------------|
| 100% of `.py` files have SPDX header | header-verifier scan: 0 files missing header |
| Shebang files handled correctly | Header appears after shebang, not before |
| No syntax regressions introduced | `uv run pytest tests/` passes |
| `uv run mypy` still passes | No type errors introduced by header edits |
| QG-3 passes | adv-scorer composite score >= 0.92 |

### 8.4 Phase 4 (CI) Exit Criteria

| Criterion | Validation |
|-----------|------------|
| Pre-commit hook is configured | `.pre-commit-config.yaml` has license header check |
| CI step exists and is enabled | CI workflow file contains the check step |
| Negative test passes | Hook catches a `.py` file missing the header |
| Positive test passes | Hook passes all existing correctly-headered files |
| QG-FINAL passes | adv-scorer composite score >= 0.92 for full FEAT-015 |

### 8.5 Workflow Completion Criteria

| Criterion | Validation |
|-----------|------------|
| All 4 phases complete | All phase statuses = COMPLETE |
| All 4 quality gates passed | All gate scores >= 0.92 |
| All 6 enablers closed | EN-930 through EN-935 status = DONE |
| FEAT-015 entity updated | FEAT-015-license-migration.md status = DONE |
| WORKTRACKER.md updated | FEAT-015 row shows DONE |

---

## 9. Risk Mitigations

| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| EN-934 finds incompatible dependency | Low | High | Blocker protocol: halt phases 2-3 until resolved. Document resolution options (upgrade, replace, exception). |
| EN-932 misses files (glob scope error) | Medium | High | header-verifier agent runs independent scan after header-applicator. QG-3 S-014 completeness dimension catches gaps. |
| Shebang handling corrupts script files | Low | High | Verify scripts still execute after header application. Run `uv run pytest` as exit criterion for Phase 3. |
| Apache 2.0 text modified accidentally | Low | High | QG-2 S-007 Constitutional critique explicitly checks for canonical text. Compare against apache.org source. |
| CI check breaks build for existing files | Low | Medium | Positive test in Phase 4 catches this before merge. |
| Context compaction during Phase 3 (50+ files) | Medium | Medium | AE-006: mandatory human escalation if triggered at C2+. Checkpoint after every 20 files processed. |
| NOTICE file format non-compliant | Low | Medium | QG-2 S-007 verifies Apache 2.0 Section 4(d) compliance explicitly. |

---

## 10. Resumption Context

### 10.1 Current Execution State

```
WORKFLOW STATUS AS OF 2026-02-17
=================================

Workflow: feat015-licmig-20260217-001
Overall Status: ACTIVE (not started)

Pipeline: lic (License Migration)
  Phase 1 (Audit):          PENDING  ← READY TO EXECUTE
  Quality Gate 1:            PENDING
  Phase 2 (Core Changes):    BLOCKED (by QG-1)
  Quality Gate 2:            PENDING
  Phase 3 (Headers):         BLOCKED (by QG-2)
  Quality Gate 3:            PENDING
  Phase 4 (CI Validation):   BLOCKED (by QG-3)
  Quality Gate FINAL:        PENDING

Agents Executed:   0 / 8
Phases Complete:   0 / 4
Gates Passed:      0 / 4
```

### 10.2 Next Actions

1. Execute Phase 1: Invoke `audit-executor` agent for EN-934 dependency license audit.
2. Run QG-1: After audit completes, invoke `/adversary` (adv-scorer, adv-executor S-007, adv-executor S-002) against the audit report.
3. If QG-1 passes: Proceed to Phase 2 — invoke `license-replacer`, `notice-creator`, and `metadata-updater` in parallel.
4. Run QG-2: After Phase 2 completes, run adversary gate on batch deliverables.
5. Continue through Phase 3 (EN-932, highest effort), QG-3, Phase 4 (EN-935), QG-FINAL.

---

## L0 Output Summary (Stakeholder View)

Migrating Jerry Framework license from MIT to Apache 2.0. Six work items across four sequential phases, each gated by an adversarial quality review. Work begins with a dependency audit that must confirm no incompatibilities before code changes proceed. Upon completion, all source files will carry Apache 2.0 SPDX headers, the LICENSE and NOTICE files will be correct, packaging metadata will be updated, and CI will enforce header compliance going forward.

## L1 Output Summary (Developer View)

Four phases: (1) `audit-executor` audits all deps for compat, (2) three parallel agents replace LICENSE, create NOTICE, update pyproject.toml, (3) `header-applicator` + `header-verifier` add SPDX headers to all `.py` files, (4) `ci-validator-implementer` + `ci-validator-tester` add pre-commit and CI enforcement. Each phase transitions through a quality gate requiring S-014 score >= 0.92 with mandatory S-007 and S-002 strategies.

## L2 Output Summary (Agent View)

Workflow ID: `feat015-licmig-20260217-001`. Pipeline alias: `lic`. Base path: `orchestration/feat015-licmig-20260217-001/lic/`. 8 execution agents + 3 adversary agents (adv-scorer, adv-executor x2) per gate = 4 gate cycles. ORCHESTRATION.yaml is state SSOT. Read it at each session start. Phase 1 is READY; all others are BLOCKED.

---

*Document ID: PROJ-001-ORCH-PLAN*
*Workflow ID: feat015-licmig-20260217-001*
*Version: 2.0*
*Cross-Session Portable: All paths are repository-relative*
*Generated by: orch-planner agent v2.2.0*
