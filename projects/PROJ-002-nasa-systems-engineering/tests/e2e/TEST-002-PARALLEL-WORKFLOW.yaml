# TEST-002-PARALLEL-WORKFLOW.yaml
# E2E Test: Fan-Out/Fan-In Parallel Workflow
# Pattern: Parallel agents with synthesis
# Purpose: Verify concurrent execution + aggregation

workflow:
  id: "TEST-002-PARALLEL"
  name: "E2E Test: Parallel Fan-Out/Fan-In Workflow"
  project_id: "TEST-E2E-002"
  version: "1.0"
  created_at: "2026-01-10T12:00:00Z"
  updated_at: "2026-01-10T13:35:02Z"
  status: "COMPLETE"

  patterns:
    - CONCURRENT
    - HIERARCHICAL

  constraints:
    max_agent_nesting: 1
    file_persistence: true
    user_authority: true
    max_concurrent_agents: 3
    checkpoint_frequency: "PHASE"

pipelines:
  fanout:
    id: "fanout-pipeline"
    name: "Fan-Out/Fan-In Pipeline"
    description: "Parallel execution with synthesis"
    status: "COMPLETE"
    current_phase: 2
    total_phases: 2
    progress_percent: 100

    phases:
      - id: 1
        name: "Parallel Execution"
        status: "COMPLETE"
        started_at: "2026-01-10T13:35:00Z"
        completed_at: "2026-01-10T13:35:00Z"
        agents:
          - id: "parallel-agent-1"
            name: "Parallel Worker 1"
            status: "COMPLETE"
            artifact: "tests/e2e/artifacts/parallel-1-output.md"
            inputs: []
          - id: "parallel-agent-2"
            name: "Parallel Worker 2"
            status: "COMPLETE"
            artifact: "tests/e2e/artifacts/parallel-2-output.md"
            inputs: []
          - id: "parallel-agent-3"
            name: "Parallel Worker 3"
            status: "COMPLETE"
            artifact: "tests/e2e/artifacts/parallel-3-output.md"
            inputs: []
        artifacts:
          - "tests/e2e/artifacts/parallel-1-output.md"
          - "tests/e2e/artifacts/parallel-2-output.md"
          - "tests/e2e/artifacts/parallel-3-output.md"

      - id: 2
        name: "Synthesis"
        status: "COMPLETE"
        blocked_by: null
        started_at: "2026-01-10T13:35:01Z"
        completed_at: "2026-01-10T13:35:01Z"
        agents:
          - id: "synthesis-agent"
            name: "Synthesis Agent"
            status: "COMPLETE"
            artifact: "tests/e2e/artifacts/synthesis-output.md"
            inputs:
              - "tests/e2e/artifacts/parallel-1-output.md"
              - "tests/e2e/artifacts/parallel-2-output.md"
              - "tests/e2e/artifacts/parallel-3-output.md"
        artifacts:
          - "tests/e2e/artifacts/synthesis-output.md"

barriers: []

execution_queue:
  current_group: 2
  groups:
    - id: 1
      name: "Fan-Out Phase"
      execution_mode: "PARALLEL"
      status: "COMPLETE"
      agents:
        - "parallel-agent-1"
        - "parallel-agent-2"
        - "parallel-agent-3"

    - id: 2
      name: "Fan-In Synthesis"
      execution_mode: "SEQUENTIAL"
      status: "COMPLETE"
      blocked_by: null
      agents:
        - "synthesis-agent"

checkpoints:
  latest_id: "CP-T002-SYNTHESIS"
  entries:
    - id: "CP-T002-FANOUT"
      name: "Phase 1 Complete - Parallel Execution"
      timestamp: "2026-01-10T13:35:00Z"
      phase: 1
      status: "COMPLETE"
      agents_completed:
        - "parallel-agent-1"
        - "parallel-agent-2"
        - "parallel-agent-3"
    - id: "CP-T002-SYNTHESIS"
      name: "Phase 2 Complete - Synthesis"
      timestamp: "2026-01-10T13:35:01Z"
      phase: 2
      status: "COMPLETE"
      agents_completed:
        - "synthesis-agent"

metrics:
  execution:
    phases_complete: 2
    phases_total: 2
    phases_percent: 100
    agents_executed: 4
    agents_total: 4
    agents_percent: 100
    artifacts_created: 4
    artifacts_total: 4
    artifacts_percent: 100

  quality:
    agent_success_rate: 100
    checkpoint_recovery_tested: true
    parallel_execution_verified: true
    fan_in_synchronization_verified: true

  timing:
    workflow_started: "2026-01-10T13:35:00Z"
    last_activity: "2026-01-10T13:35:01Z"
    estimated_completion: "2026-01-10T13:35:01Z"
    total_execution_time_seconds: 1
    phase_1_duration_seconds: 0
    phase_2_duration_seconds: 0

blockers:
  active: []

issues:
  resolved: []

next_actions:
  immediate: []

  subsequent: []

resumption:
  last_checkpoint: "CP-T002-SYNTHESIS"
  current_state: "Workflow completed successfully"
  next_step: "Generate test execution report"

  files_to_read:
    - "tests/e2e/TEST-002-PARALLEL-WORKFLOW.yaml"

  cross_session_portable: true
  ephemeral_references: false
