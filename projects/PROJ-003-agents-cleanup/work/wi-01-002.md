# WI-01-002: Update plugin.json Schema and Fields

| Metadata | Value |
|----------|-------|
| **ID** | wi-01-002 |
| **Phase** | 1 - Plugin Infrastructure |
| **Status** | DONE |
| **Completed** | 2026-01-12 |
| **Priority** | HIGH |
| **Created** | 2026-01-12 |

---

## Summary

Update plugin.json to use standard Anthropic schema and field formats per Claude Code canonical structure.

---

## Tasks

- [x] Update `$schema` to `https://anthropic.com/claude-code/plugin.schema.json`
- [x] Convert `author` from string to object format: `{"name": "...", "url": "..."}`
- [x] Convert `commands` from nested objects to path strings
- [x] Convert `agents` from nested objects to path strings
- [x] Convert `hooks` from nested objects to path strings
- [x] Validate against schema
- [x] Test plugin loads correctly

---

## Acceptance Criteria

- [x] `$schema` points to Anthropic canonical schema
- [x] `author` is an object with `name` and `url` fields
- [x] `commands`, `agents`, `hooks` use path string format
- [x] No deprecated field formats remain
- [x] Plugin passes schema validation

---

## Verification Evidence

### Expected plugin.json Structure
```json
{
  "$schema": "https://anthropic.com/claude-code/plugin.schema.json",
  "name": "jerry",
  "version": "0.1.0",
  "author": {
    "name": "...",
    "url": "..."
  },
  "commands": [
    "commands/architect.md",
    "commands/release.md"
  ],
  "agents": [
    ".claude/agents/orchestrator.md",
    ".claude/agents/qa-engineer.md",
    ".claude/agents/security-auditor.md"
  ],
  "hooks": "hooks/hooks.json"
}
```

### Output Artifact
- **File**: `.claude-plugin/plugin.json` (modified)

### Source Reference
- proj-003-e-001: Claude Code plugin schema requirements

### Execution Evidence (2026-01-12)

**Changes Applied:**
1. `$schema`: `https://claude.ai/schemas/plugin-manifest.json` → `https://anthropic.com/claude-code/plugin.schema.json`
2. `author`: `"Jerry Framework Contributors"` → `{"name": "Jerry Framework Contributors", "url": "https://github.com/geekatron/jerry"}`
3. `skills`: Converted from array of objects to array of path strings
4. `agents`: Converted from array of objects to array of path strings
5. `commands`: Converted from array of objects to array of path strings (paths still point to `.claude/commands/` until wi-01-003)
6. `hooks`: Converted from nested object to single path string `"hooks/hooks.json"`

**Validation Output:**
```bash
$ python3 -c "import json; data = json.load(open('.claude-plugin/plugin.json')); ..."
JSON VALID: OK
Schema: https://anthropic.com/claude-code/plugin.schema.json
Author type: dict
```

**hooks/hooks.json Verification:**
```bash
$ test -f hooks/hooks.json && echo "hooks/hooks.json EXISTS: OK"
hooks/hooks.json EXISTS: OK
```

---

## Relationships

| Type | ID | Description |
|------|----|-------------|
| depends_on | wi-01-001 | Requires renamed file |
| blocks | wi-01-003 | Commands paths require this update |
| related_to | GAP-002 | Addresses plugin manifest schema gap |

---

## Notes

Command paths in plugin.json currently point to `.claude/commands/`. These will be updated to `commands/` in wi-01-003 after the directory is created and files are moved.
