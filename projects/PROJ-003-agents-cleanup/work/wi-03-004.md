# WI-03-004: Update TEMPLATE.md and Validate Phase 3

| Metadata | Value |
|----------|-------|
| **ID** | wi-03-004 |
| **Phase** | 3 - Agent Standardization |
| **Status** | DONE |
| **Completed** | 2026-01-12 |
| **Priority** | MEDIUM |
| **Created** | 2026-01-12 |

---

## Summary

Update `.claude/agents/TEMPLATE.md` to align with PS_AGENT_TEMPLATE structure and validate all Phase 3 agent frontmatter completeness.

---

## Tasks

- [x] Read current TEMPLATE.md content
- [x] Update template to include YAML frontmatter example
- [x] Align structure with PS_AGENT_TEMPLATE from problem-solving skill
- [x] Validate all 3 framework agents have complete frontmatter
- [x] Verify all agents load correctly via Task tool
- [x] Create Phase 3 completion commit

---

## Acceptance Criteria

- [x] TEMPLATE.md includes YAML frontmatter section
- [x] TEMPLATE.md shows all required fields (name, description, model, tools)
- [x] TEMPLATE.md includes `<example>` block syntax
- [x] All 3 framework agents pass frontmatter validation
- [x] Agents can be delegated to via Task tool
- [x] Git commit created with all Phase 3 changes

---

## Verification Evidence

### Template Structure
```markdown
---
name: {agent-name}
description: Use this agent when...
  <example>User: "..."</example>
model: inherit | claude-opus-4-5 | claude-sonnet-4-5
color: {color}
tools:
  - Tool1
  - Tool2
---

# {Agent Name}

## Purpose
...

## Capabilities
...
```

### ADR Phase 3 Success Criteria
- [x] All 3 framework agents have YAML frontmatter
- [x] All frontmatter includes `name`, `description`, `model`, `tools`
- [x] All descriptions include 2-4 `<example>` blocks

### Validation Commands
```bash
# All framework agents have frontmatter
for agent in orchestrator qa-engineer security-auditor; do
  grep -q "^name:" .claude/agents/$agent.md && echo "$agent: OK"
done
```

### Output Artifacts
- **File**: `.claude/agents/TEMPLATE.md` (modified)
- **Commit**: Phase 3 completion commit (pending)

### Source Reference
- proj-003-e-004: PS_AGENT_TEMPLATE pattern
- ADR-PROJ003-001: Phase 3 validation criteria

### Execution Evidence (2026-01-12)

**TEMPLATE.md Updates:**
- Added YAML frontmatter section at top of file
- Included all required fields: name, description, model, color, tools
- Added `<example>` block syntax in description template
- Updated template version to 1.1
- Added "Example Frontmatter" section at bottom with real orchestrator example

**Phase 3 Summary Validation:**
```
=== Phase 3 Agent Frontmatter Validation ===

=== orchestrator ===
[OK] Starts with ---
[OK] name field present
[OK] description field present
[OK] model field present
[OK] color field present
[OK] tools field present
[OK] 3 <example> blocks found

=== qa-engineer ===
[OK] Starts with ---
[OK] name field present
[OK] description field present
[OK] model field present
[OK] color field present
[OK] tools field present
[OK] 3 <example> blocks found

=== security-auditor ===
[OK] Starts with ---
[OK] name field present
[OK] description field present
[OK] model field present
[OK] color field present
[OK] tools field present
[OK] 3 <example> blocks found

=== TEMPLATE.md ===
[OK] Template has frontmatter
```

**Agent Details:**
| Agent | Model | Color | Tools |
|-------|-------|-------|-------|
| orchestrator | claude-opus-4-5 | purple | Read, Write, Edit, Glob, Grep, Task |
| qa-engineer | inherit | green | Read, Write, Edit, Bash, Grep |
| security-auditor | inherit | red | Read, Grep, Glob |

---

## Relationships

| Type | ID | Description |
|------|----|-------------|
| depends_on | wi-03-001 | Orchestrator must have frontmatter |
| depends_on | wi-03-002 | QA engineer must have frontmatter |
| depends_on | wi-03-003 | Security auditor must have frontmatter |
| blocks | wi-04-001 | Phase 4 requires Phase 3 complete |

---

## Notes

This is the gatekeeper work item for Phase 3. Ensures template is updated and all agents validated before proceeding to Phase 4.
