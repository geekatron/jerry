# WI-04-001: Update hooks.json Paths to Use CLAUDE_PLUGIN_ROOT

| Metadata | Value |
|----------|-------|
| **ID** | wi-04-001 |
| **Phase** | 4 - Hook System |
| **Status** | DONE |
| **Completed** | 2026-01-12 |
| **Priority** | MEDIUM |
| **Created** | 2026-01-12 |

---

## Summary

Update `hooks/hooks.json` to use `${CLAUDE_PLUGIN_ROOT}` variable for all paths, ensuring portable hook configuration across environments.

---

## Tasks

- [x] Read current hooks/hooks.json content
- [x] Identify all hardcoded paths in hook commands
- [x] Replace absolute/relative paths with `${CLAUDE_PLUGIN_ROOT}` prefix
- [x] Validate JSON syntax
- [x] Test hooks fire correctly with new paths

---

## Acceptance Criteria

- [x] All paths in hooks.json use `${CLAUDE_PLUGIN_ROOT}` variable
- [x] No hardcoded absolute paths remain
- [x] JSON is syntactically valid
- [x] Hooks execute correctly with portable paths

---

## Verification Evidence

### Expected Path Format
```json
{
  "command": "python3 ${CLAUDE_PLUGIN_ROOT}/scripts/session_start.py"
}
```

### Actual Path (from hooks/hooks.json:10)
```json
"command": "python3 ${CLAUDE_PLUGIN_ROOT}/scripts/session_start.py"
```

### Validation Results (2026-01-12)
```
✓ hooks.json uses ${CLAUDE_PLUGIN_ROOT} variable
✓ No hardcoded absolute paths found
✓ JSON syntax valid (python3 -c "import json; json.load(open('hooks/hooks.json'))")
✓ SessionStart hook configured and fires on session initialization
```

### Output Artifact
- **File**: `hooks/hooks.json` (already correct - no changes needed)

### Source Reference
- proj-003-e-001: Hook configuration best practices
- ADR-PROJ003-001: Phase 4 requirements

---

## Relationships

| Type | ID | Description |
|------|----|-------------|
| depends_on | wi-03-004 | Phase 3 must be complete |
| blocks | wi-04-002 | PreToolUse requires portable paths |
| parallel | wi-04-003 | Can proceed in parallel once paths updated |

---

## Notes

The `${CLAUDE_PLUGIN_ROOT}` variable is resolved at runtime by Claude Code to the plugin root directory.
