# WI-04-001: Update hooks.json Paths to Use CLAUDE_PLUGIN_ROOT

| Metadata | Value |
|----------|-------|
| **ID** | wi-04-001 |
| **Phase** | 4 - Hook System |
| **Status** | PENDING |
| **Priority** | MEDIUM |
| **Created** | 2026-01-12 |

---

## Summary

Update `hooks/hooks.json` to use `${CLAUDE_PLUGIN_ROOT}` variable for all paths, ensuring portable hook configuration across environments.

---

## Tasks

- [ ] Read current hooks/hooks.json content
- [ ] Identify all hardcoded paths in hook commands
- [ ] Replace absolute/relative paths with `${CLAUDE_PLUGIN_ROOT}` prefix
- [ ] Validate JSON syntax
- [ ] Test hooks fire correctly with new paths

---

## Acceptance Criteria

- [ ] All paths in hooks.json use `${CLAUDE_PLUGIN_ROOT}` variable
- [ ] No hardcoded absolute paths remain
- [ ] JSON is syntactically valid
- [ ] Hooks execute correctly with portable paths

---

## Verification Evidence

### Expected Path Format
```json
{
  "command": "python3 ${CLAUDE_PLUGIN_ROOT}/scripts/session_start.py"
}
```

### Validation Commands
```bash
# hooks.json uses portable paths
grep -q '\${CLAUDE_PLUGIN_ROOT}' hooks/hooks.json && echo "Paths: OK"

# No hardcoded paths
! grep -E '"/.*\.py"' hooks/hooks.json && echo "No hardcoded: OK"

# JSON is valid
python3 -c "import json; json.load(open('hooks/hooks.json'))"
```

### Output Artifact
- **File**: `hooks/hooks.json` (modified)

### Source Reference
- proj-003-e-001: Hook configuration best practices
- ADR-PROJ003-001: Phase 4 requirements

---

## Relationships

| Type | ID | Description |
|------|----|-------------|
| depends_on | wi-03-004 | Phase 3 must be complete |
| blocks | wi-04-002 | PreToolUse requires portable paths |
| parallel | wi-04-003 | Can proceed in parallel once paths updated |

---

## Notes

The `${CLAUDE_PLUGIN_ROOT}` variable is resolved at runtime by Claude Code to the plugin root directory.
