# WI-04-004: Cleanup and Validate Hook System

| Metadata | Value |
|----------|-------|
| **ID** | wi-04-004 |
| **Phase** | 4 - Hook System |
| **Status** | PENDING |
| **Priority** | MEDIUM |
| **Created** | 2026-01-12 |

---

## Summary

Final cleanup and validation of Phase 4 hook system changes. Ensure all hooks work correctly and legacy directories are removed.

---

## Tasks

- [ ] Verify all hook paths use portable `${CLAUDE_PLUGIN_ROOT}` format
- [ ] Verify PreToolUse hook configured for Write/Edit
- [ ] Remove `.claude/hooks/` directory if empty
- [ ] Test all hooks fire correctly
- [ ] Document any issues encountered
- [ ] Create Phase 4 completion commit

---

## Acceptance Criteria

- [ ] All hooks fire correctly on appropriate triggers
- [ ] No legacy hook directories remain
- [ ] hooks.json is valid JSON
- [ ] Git commit created with all Phase 4 changes
- [ ] Phase 4 success criteria from ADR satisfied

---

## Verification Evidence

### ADR Phase 4 Success Criteria
- [ ] All hook paths use `${CLAUDE_PLUGIN_ROOT}`
- [ ] PreToolUse hook configured for Write/Edit
- [ ] `.claude/hooks/` directory removed or empty

### Validation Commands
```bash
# Full Phase 4 validation
grep -q '\${CLAUDE_PLUGIN_ROOT}' hooks/hooks.json && \
grep -q '"PreToolUse"' hooks/hooks.json && \
test ! -d .claude/hooks && \
echo "Phase 4: COMPLETE"
```

### Output Artifact
- **Commit**: Phase 4 completion commit

### Source Reference
- ADR-PROJ003-001: Phase 4 validation criteria

---

## Relationships

| Type | ID | Description |
|------|----|-------------|
| depends_on | wi-04-001 | Paths updated |
| depends_on | wi-04-002 | PreToolUse configured |
| depends_on | wi-04-003 | Scripts migrated |
| blocks | wi-05-001 | Phase 5 requires Phase 4 complete |

---

## Notes

This is the gatekeeper work item for Phase 4. All previous Phase 4 items must be complete and validated.
