# ORCHESTRATION_PLAN.md

> **Document ID:** PROJ-007-ORCH-PLAN
> **Project:** PROJ-007-agent-patterns
> **Workflow ID:** `agent-patterns-20260221-001`
> **Status:** ACTIVE
> **Version:** 2.0
> **Created:** 2026-02-21
> **Last Updated:** 2026-02-21

> **Disclaimer:** This plan is generated by the orch-planner agent (v2.2.0). It reflects the orchestration design for PROJ-007 Agent Patterns as of the creation date. Execution state is authoritative in `ORCHESTRATION.yaml`. All paths are repository-relative and cross-session portable.

---

## Document Sections

| Section | Purpose |
|---------|---------|
| [Executive Summary](#1-executive-summary) | Workflow purpose, current state, pattern classification |
| [Workflow Architecture](#2-workflow-architecture) | Full ASCII diagram with all 19 agents across 5 phases |
| [Phase Definitions](#3-phase-definitions) | Per-phase detail: agents, inputs, outputs, strategies |
| [Sync Barrier Protocol](#4-sync-barrier-protocol) | Cross-pollination rules, quality gates at every barrier |
| [Adversarial Strategy Mapping](#5-adversarial-strategy-mapping) | C4 tournament configuration, all 10 strategies |
| [Agent Registry](#6-agent-registry) | All 19 agents with pipeline, phase, and artifact assignments |
| [State Management](#7-state-management) | State files, artifact path structure, checkpoints |
| [Execution Constraints](#8-execution-constraints) | HARD rules, soft constraints, constitutional compliance |
| [Success Criteria](#9-success-criteria) | Phase-level and workflow-level exit criteria |
| [Risk Mitigations](#10-risk-mitigations) | Identified risks and mitigations |
| [Resumption Context](#11-resumption-context) | Current state, next actions, files to load |

---

## 1. Executive Summary

PROJ-007 Agent Patterns is a comprehensive research-to-codification workflow that produces rules, patterns, and guides for building Claude Code agents within the Jerry framework. The workflow leverages ALL 19 agents from the problem-solving (9 agent types) and nasa-se (10 agent types) skills in a **cross-pollinated dual-pipeline architecture**.

The two pipelines -- Problem-Solving (PS) and NASA Systems Engineering (NSE) -- execute in parallel across 5 phases, with 4 sync barriers enabling bidirectional cross-pollination of findings. The PS pipeline brings research rigor, pattern synthesis, and iterative quality refinement. The NSE pipeline brings requirements engineering, architecture analysis, risk assessment, V&V planning, and formal technical review. Their combination produces artifacts that are both practically grounded and formally validated.

This is a **C4 (Critical)** workflow because the final deliverables include rule files for `.context/rules/` (triggering AE-002 auto-C3+) and ADRs for architectural decisions (triggering AE-003 auto-C3). The governance and architectural nature of these artifacts elevates to C4, requiring all 10 adversarial strategies in tournament mode during the final quality gate.

**Current State:** Phase 1 PENDING. All agents awaiting execution start.

**Orchestration Pattern:** Cross-Pollinated Dual Pipeline with Sync Barriers and C4 Tournament Quality Gate

### 1.1 Workflow Identification

| Field | Value | Source |
|-------|-------|--------|
| Workflow ID | `agent-patterns-20260221-001` | user |
| ID Format | `{purpose}-{YYYYMMDD}-{NNN}` | semantic-date-seq |
| Base Path | `orchestration/agent-patterns-20260221-001/` | Dynamic |

**Pipeline Configuration:**

| Pipeline | Short Alias | Skill Source | Agent Types |
|----------|-------------|-------------|-------------|
| Pipeline A (PS) | `ps` | problem-solving | 9 types (researcher, analyst, investigator, synthesizer, architect, validator, reviewer, critic, reporter) |
| Pipeline B (NSE) | `nse` | nasa-se | 10 types (explorer, requirements, architecture, risk, verification, integration, configuration, qa, reviewer, reporter) |

**Artifact Output Locations:**

```
orchestration/agent-patterns-20260221-001/
├── ps/
│   ├── phase-1-research/
│   ├── phase-2-analysis/
│   ├── phase-3-synthesis/
│   ├── phase-4-codification/
│   └── phase-5-review/
├── nse/
│   ├── phase-1-research/
│   ├── phase-2-analysis/
│   ├── phase-3-synthesis/
│   ├── phase-4-codification/
│   └── phase-5-review/
├── cross-pollination/
│   ├── barrier-1/
│   │   ├── ps-to-nse/
│   │   └── nse-to-ps/
│   ├── barrier-2/
│   │   ├── ps-to-nse/
│   │   └── nse-to-ps/
│   ├── barrier-3/
│   │   ├── ps-to-nse/
│   │   └── nse-to-ps/
│   └── barrier-4/
│       ├── ps-to-nse/
│       └── nse-to-ps/
├── adversary/
│   └── c4-tournament/
└── synthesis/
```

---

## 2. Workflow Architecture

### 2.1 Pipeline Diagram

```
    PIPELINE A (PS)                                  PIPELINE B (NSE)
    problem-solving                                  nasa-se
    ===============                                  ===============

┌───────────────────────────────────┐           ┌───────────────────────────────────┐
│ PHASE 1: RESEARCH (PARALLEL)     │           │ PHASE 1: RESEARCH                 │
│ ───────────────────────────────── │           │ ───────────────────────────────── │
│                                   │           │                                   │
│  [ps-researcher-001] (PARALLEL)  │           │  [nse-explorer-001]               │
│   Agent Architecture & Caps      │           │   Design Alternatives & Trade     │
│   (Context7 + WebSearch)         │           │   Studies (WebSearch + divergent)  │
│                                   │           │                                   │
│  [ps-researcher-002] (PARALLEL)  │           │                                   │
│   Routing, Triggers, Decisions   │           │                                   │
│   (WebSearch + Context7)         │           │                                   │
│                                   │           │                                   │
│  [ps-researcher-003] (PARALLEL)  │           │                                   │
│   Industry Best Practices        │           │                                   │
│   (Context7: LangGraph, CrewAI,  │           │                                   │
│    AutoGen + WebSearch)           │           │                                   │
│                                   │           │                                   │
│ STATUS: PENDING                   │           │ STATUS: PENDING                   │
└────────────────┬──────────────────┘           └────────────────┬──────────────────┘
                 │                                               │
                 ▼                                               ▼
╔═══════════════════════════════════════════════════════════════════════════════════╗
║                              SYNC BARRIER 1                                      ║
║  ┌─────────────────────────────────────────────────────────────────────────────┐  ║
║  │  ps→nse: Research synthesis handoff (3 research reports consolidated)      │  ║
║  │  nse→ps: Trade study findings and alternative designs                      │  ║
║  │  QUALITY GATE: All 4 research artifacts validated for completeness         │  ║
║  │  Threshold: All research outputs present and internally consistent         │  ║
║  └─────────────────────────────────────────────────────────────────────────────┘  ║
║  STATUS: PENDING                                                                  ║
╚═══════════════════════════════════════════════════════════════════════════════════╝
                 │                                               │
                 ▼                                               ▼
┌───────────────────────────────────┐           ┌───────────────────────────────────┐
│ PHASE 2: ANALYSIS (PARALLEL)     │           │ PHASE 2: ANALYSIS (PARALLEL)      │
│ ───────────────────────────────── │           │ ───────────────────────────────── │
│                                   │           │                                   │
│  [ps-analyst-001] (PARALLEL)     │           │  [nse-requirements-001] (PARALLEL)│
│   Pattern categorization & gap   │           │   Formal requirements (shall-     │
│   analysis: Jerry agents vs      │           │   statements) for agent dev rules │
│   best practices                 │           │                                   │
│                                   │           │  [nse-architecture-001] (PARALLEL)│
│  [ps-analyst-002] (PARALLEL)     │           │   Architecture patterns for       │
│   Trade-off analysis: routing    │           │   agent design (hexagonal,        │
│   and trigger approaches         │           │   ports/adapters for agents)      │
│                                   │           │                                   │
│  [ps-investigator-001] (PARALLEL)│           │  [nse-risk-001] (PARALLEL)        │
│   Common agent failure modes     │           │   Risk assessment of agent        │
│   and anti-patterns              │           │   pattern approaches              │
│                                   │           │                                   │
│ STATUS: PENDING                   │           │ STATUS: PENDING                   │
└────────────────┬──────────────────┘           └────────────────┬──────────────────┘
                 │                                               │
                 ▼                                               ▼
╔═══════════════════════════════════════════════════════════════════════════════════╗
║                              SYNC BARRIER 2                                      ║
║  ┌─────────────────────────────────────────────────────────────────────────────┐  ║
║  │  ps→nse: Gap analysis + failure modes for requirements refinement          │  ║
║  │  nse→ps: Formal requirements + architecture patterns + risk register       │  ║
║  │  QUALITY GATE: Analysis artifacts cross-validated for consistency           │  ║
║  │  Threshold: No contradictions between PS analysis and NSE requirements     │  ║
║  └─────────────────────────────────────────────────────────────────────────────┘  ║
║  STATUS: PENDING                                                                  ║
╚═══════════════════════════════════════════════════════════════════════════════════╝
                 │                                               │
                 ▼                                               ▼
┌───────────────────────────────────┐           ┌───────────────────────────────────┐
│ PHASE 3: SYNTHESIS & DESIGN      │           │ PHASE 3: SYNTHESIS & DESIGN       │
│ (PARALLEL)                       │           │ (PARALLEL)                        │
│ ───────────────────────────────── │           │ ───────────────────────────────── │
│                                   │           │                                   │
│  [ps-synthesizer-001] (PARALLEL) │           │  [nse-verification-001] (PARALLEL)│
│   Cross-document synthesis of    │           │   V&V planning: how to verify     │
│   all research + analysis into   │           │   agents meet standards           │
│   coherent patterns              │           │                                   │
│                                   │           │  [nse-integration-001] (PARALLEL) │
│  [ps-architect-001] (PARALLEL)   │           │   Integration patterns: agent     │
│   ADR: Agent design pattern      │           │   handoff protocols, context      │
│   decisions                      │           │   passing                         │
│                                   │           │                                   │
│  [ps-architect-002] (PARALLEL)   │           │                                   │
│   ADR: Routing/trigger framework │           │                                   │
│   decisions                      │           │                                   │
│                                   │           │                                   │
│ STATUS: PENDING                   │           │ STATUS: PENDING                   │
└────────────────┬──────────────────┘           └────────────────┬──────────────────┘
                 │                                               │
                 ▼                                               ▼
╔═══════════════════════════════════════════════════════════════════════════════════╗
║                              SYNC BARRIER 3                                      ║
║  ┌─────────────────────────────────────────────────────────────────────────────┐  ║
║  │  ps→nse: Pattern synthesis + ADR drafts for V&V alignment                  │  ║
║  │  nse→ps: V&V criteria + integration patterns for rule codification         │  ║
║  │  QUALITY GATE: ADRs meet C3 quality threshold                              │  ║
║  │  Threshold: >= 0.95 on ADR artifacts (AE-003: new ADR = auto-C3)           │  ║
║  └─────────────────────────────────────────────────────────────────────────────┘  ║
║  STATUS: PENDING                                                                  ║
╚═══════════════════════════════════════════════════════════════════════════════════╝
                 │                                               │
                 ▼                                               ▼
┌───────────────────────────────────┐           ┌───────────────────────────────────┐
│ PHASE 4: CODIFICATION            │           │ PHASE 4: CODIFICATION             │
│ (SEQUENTIAL within pipeline)     │           │ (SEQUENTIAL within pipeline)      │
│ ───────────────────────────────── │           │ ───────────────────────────────── │
│                                   │           │                                   │
│  [ps-architect-003] (SEQ step 1) │           │  [nse-configuration-001]          │
│   Create rule files:             │           │   (SEQ step 1)                    │
│   - agent-development-stds.md    │           │   Configuration management for    │
│   - agent-routing-stds.md        │           │   agent pattern baselines         │
│                                   │           │                                   │
│  [ps-validator-001] (SEQ step 2) │           │  [nse-qa-001] (SEQ step 2)        │
│   Validate rules against Jerry   │           │   Quality assurance audit of      │
│   constitutional constraints     │           │   all deliverables                │
│                                   │           │                                   │
│ STATUS: PENDING                   │           │ STATUS: PENDING                   │
└────────────────┬──────────────────┘           └────────────────┬──────────────────┘
                 │                                               │
                 ▼                                               ▼
╔═══════════════════════════════════════════════════════════════════════════════════╗
║                              SYNC BARRIER 4                                      ║
║  ┌─────────────────────────────────────────────────────────────────────────────┐  ║
║  │  ps→nse: Rule files + validation results for technical review              │  ║
║  │  nse→ps: Config baselines + QA audit findings for rule refinement          │  ║
║  │  QUALITY GATE: Rule files meet C4 pre-tournament threshold                 │  ║
║  │  Threshold: >= 0.95 on rule files (AE-002: .context/rules/ = auto-C3+)    │  ║
║  └─────────────────────────────────────────────────────────────────────────────┘  ║
║  STATUS: PENDING                                                                  ║
╚═══════════════════════════════════════════════════════════════════════════════════╝
                 │                                               │
                 ▼                                               ▼
┌───────────────────────────────────┐           ┌───────────────────────────────────┐
│ PHASE 5: REVIEW & QUALITY GATE   │           │ PHASE 5: REVIEW & QUALITY GATE    │
│ (C4 Tournament)                  │           │ (C4 Tournament)                   │
│ ───────────────────────────────── │           │ ───────────────────────────────── │
│                                   │           │                                   │
│  [ps-reviewer-001]               │           │  [nse-reviewer-001]               │
│   Full code/design review of     │           │   Technical review gate            │
│   all rule files and templates   │           │   (CDR-equivalent for agent       │
│                                   │           │    patterns)                      │
│  [ps-critic-001]                 │           │                                   │
│   Quality scoring (S-014         │           │  [nse-reporter-001]               │
│   LLM-as-Judge at >= 0.95)       │           │   SE status report with metrics   │
│                                   │           │                                   │
│  [ps-reporter-001]               │           │                                   │
│   Final status report and        │           │                                   │
│   project synthesis              │           │                                   │
│                                   │           │                                   │
│ STATUS: PENDING                   │           │ STATUS: PENDING                   │
└────────────────┬──────────────────┘           └────────────────┬──────────────────┘
                 │                                               │
                 └───────────────────┬───────────────────────────┘
                                     │
                                     ▼
                 ╔═══════════════════════════════════════════╗
                 ║     C4 ADVERSARY TOURNAMENT               ║
                 ║  ┌─────────────────────────────────────┐  ║
                 ║  │ All 10 Strategies Applied:          │  ║
                 ║  │ S-001 Red Team          S-007 Const │  ║
                 ║  │ S-002 Devil's Advocate  S-010 Self  │  ║
                 ║  │ S-003 Steelman         S-011 CoV   │  ║
                 ║  │ S-004 Pre-Mortem       S-012 FMEA  │  ║
                 ║  │ S-013 Inversion        S-014 Judge │  ║
                 ║  │                                     │  ║
                 ║  │ Threshold: >= 0.95 weighted         │  ║
                 ║  │ Max iterations: 5                   │  ║
                 ║  │ On FAIL: Revise and re-score        │  ║
                 ║  │ On EXHAUST: Human escalation        │  ║
                 ║  └─────────────────────────────────────┘  ║
                 ║  STATUS: PENDING                          ║
                 ╚═══════════════════════════════════════════╝
                                     │
                                     ▼
                 ╔═══════════════════════════════════════════╗
                 ║          WORKFLOW COMPLETE                 ║
                 ║  All 19 agents executed. All barriers     ║
                 ║  crossed. C4 tournament passed.           ║
                 ║  Rule files committed to .context/rules/. ║
                 ║  ADRs committed to docs/design/.          ║
                 ╚═══════════════════════════════════════════╝
```

### 2.2 Orchestration Pattern Classification

| Pattern | Applied | Description |
|---------|---------|-------------|
| Sequential | Yes | Phases execute in strict dependency order (1 through 5) |
| Concurrent | Yes | Agents within each phase run in parallel (within pipeline) |
| Barrier Sync | Yes | 4 sync barriers with cross-pollination between pipelines |
| Hierarchical | Yes | Orchestrator delegates to 19 worker agents |
| Cross-Pollination | Yes | Bidirectional handoff between PS and NSE pipelines at every barrier |
| Fan-Out | Yes | Phase 1 fans out to 4 parallel agents (3 PS + 1 NSE) |
| Fan-In | Yes | Phase 5 converges all deliverables for C4 tournament |

### 2.3 Critical Path

```
Phase 1 Research → Barrier 1 → Phase 2 Analysis → Barrier 2 → Phase 3 Synthesis
→ Barrier 3 → Phase 4 Codification → Barrier 4 → Phase 5 Review → C4 Tournament
```

The critical path runs through all 5 phases sequentially. Within each phase, PS and NSE pipelines execute concurrently. No single agent within a phase gates the next phase -- the barrier requires ALL agents in BOTH pipelines to complete before cross-pollination and advancement.

---

## 3. Phase Definitions

### 3.1 Phase 1: Research (Parallel Fan-Out)

**Purpose:** Survey the landscape of Claude Code agent capabilities, routing mechanisms, industry patterns, and alternative designs.

**Execution Mode:** PARALLEL across both pipelines

#### 3.1.1 PS Pipeline -- Phase 1

| Agent ID | Role | Responsibility | MCP Tools |
|----------|------|----------------|-----------|
| ps-researcher-001 | Researcher | Claude Code Agent Architecture & Capabilities. Survey model capabilities, tool calling patterns, context management, agent lifecycle. | Context7 (Claude Code SDK docs), WebSearch |
| ps-researcher-002 | Researcher | Agent Routing, Trigger Design & Decision Frameworks. Research how to route user intent to correct agent, trigger keyword patterns, decision trees. | WebSearch, Context7 |
| ps-researcher-003 | Researcher | Industry Best Practices & Community Patterns. Survey LangGraph, CrewAI, AutoGen, and other frameworks for agent orchestration patterns. | Context7 (LangGraph, CrewAI, AutoGen), WebSearch |

**Artifact Paths:**
```
orchestration/agent-patterns-20260221-001/ps/phase-1-research/
├── ps-researcher-001/ps-researcher-001-research.md
├── ps-researcher-002/ps-researcher-002-research.md
└── ps-researcher-003/ps-researcher-003-research.md
```

#### 3.1.2 NSE Pipeline -- Phase 1

| Agent ID | Role | Responsibility | MCP Tools |
|----------|------|----------------|-----------|
| nse-explorer-001 | Explorer | Agent Design Alternatives & Trade Studies. Divergent exploration of design approaches: monolithic vs microservice agents, stateful vs stateless, declarative vs imperative routing. | WebSearch |

**Artifact Paths:**
```
orchestration/agent-patterns-20260221-001/nse/phase-1-research/
└── nse-explorer-001/nse-explorer-001-exploration.md
```

---

### 3.2 Phase 2: Analysis (Parallel Fan-Out)

**Purpose:** Analyze research findings: categorize patterns, identify gaps, assess trade-offs, formalize requirements, evaluate risks.

**Execution Mode:** PARALLEL across both pipelines

**Inputs:** Phase 1 artifacts + Barrier 1 cross-pollination

#### 3.2.1 PS Pipeline -- Phase 2

| Agent ID | Role | Responsibility |
|----------|------|----------------|
| ps-analyst-001 | Analyst | Pattern categorization and gap analysis. Compare current Jerry agent patterns against best practices discovered in Phase 1. Identify missing patterns, redundant approaches, and improvement opportunities. |
| ps-analyst-002 | Analyst | Trade-off analysis of routing/trigger approaches. Evaluate keyword-based vs intent-based vs hybrid routing. Score approaches on: accuracy, maintainability, extensibility, context cost. |
| ps-investigator-001 | Investigator | Investigation of common agent failure modes and anti-patterns. Root-cause analysis of agent quality failures: prompt drift, tool misuse, context overflow, hallucinated capabilities. |

**Artifact Paths:**
```
orchestration/agent-patterns-20260221-001/ps/phase-2-analysis/
├── ps-analyst-001/ps-analyst-001-analysis.md
├── ps-analyst-002/ps-analyst-002-analysis.md
└── ps-investigator-001/ps-investigator-001-investigation.md
```

#### 3.2.2 NSE Pipeline -- Phase 2

| Agent ID | Role | Responsibility | MCP Tools |
|----------|------|----------------|-----------|
| nse-requirements-001 | Requirements Engineer | Formal requirements for agent development rules. Produce shall-statements covering agent structure, prompt design, tool usage, quality criteria, testing. | Memory-Keeper (store, retrieve, search) |
| nse-architecture-001 | Architect | Architecture patterns for agent design. Map hexagonal architecture concepts to agent structure: ports (tool interfaces), adapters (prompt strategies), domain (reasoning core). | Context7 |
| nse-risk-001 | Risk Assessor | Risk assessment of agent pattern approaches. Evaluate likelihood and impact of each design approach failing. Produce risk register with mitigations. | -- |

**Artifact Paths:**
```
orchestration/agent-patterns-20260221-001/nse/phase-2-analysis/
├── nse-requirements-001/nse-requirements-001-requirements.md
├── nse-architecture-001/nse-architecture-001-architecture.md
└── nse-risk-001/nse-risk-001-risk-assessment.md
```

---

### 3.3 Phase 3: Synthesis & Design (Parallel Fan-Out)

**Purpose:** Synthesize all research and analysis into coherent patterns, produce architectural decisions, and create V&V criteria.

**Execution Mode:** PARALLEL across both pipelines

**Inputs:** Phase 2 artifacts + Barrier 2 cross-pollination

#### 3.3.1 PS Pipeline -- Phase 3

| Agent ID | Role | Responsibility | MCP Tools |
|----------|------|----------------|-----------|
| ps-synthesizer-001 | Synthesizer | Cross-document synthesis of all research (Phase 1) and analysis (Phase 2) into a coherent agent pattern taxonomy. Identify pattern families, relationships, and selection criteria. | Context7 |
| ps-architect-001 | Architect | ADR for agent design pattern decisions. Document the chosen patterns for agent structure, prompt architecture, and tool usage. Traceability to requirements from nse-requirements-001. | Context7, Memory-Keeper (store, retrieve, search) |
| ps-architect-002 | Architect | ADR for routing/trigger framework decisions. Document the chosen approach for agent routing, trigger keywords, and decision frameworks. Traceability to trade-off analysis from ps-analyst-002. | Context7, Memory-Keeper (store, retrieve, search) |

**Artifact Paths:**
```
orchestration/agent-patterns-20260221-001/ps/phase-3-synthesis/
├── ps-synthesizer-001/ps-synthesizer-001-synthesis.md
├── ps-architect-001/ps-architect-001-adr-agent-design.md
└── ps-architect-002/ps-architect-002-adr-routing-triggers.md
```

#### 3.3.2 NSE Pipeline -- Phase 3

| Agent ID | Role | Responsibility |
|----------|------|----------------|
| nse-verification-001 | Verification Engineer | V&V planning for agent patterns. Define how to verify that agents built under the new rules meet quality standards. Test strategies, acceptance criteria, automated checks. |
| nse-integration-001 | Integration Engineer | Integration patterns between agents. Define handoff protocols, context passing conventions, artifact format standards, inter-agent communication patterns. |

**Artifact Paths:**
```
orchestration/agent-patterns-20260221-001/nse/phase-3-synthesis/
├── nse-verification-001/nse-verification-001-vv-plan.md
└── nse-integration-001/nse-integration-001-integration-patterns.md
```

---

### 3.4 Phase 4: Codification (Sequential within Pipeline)

**Purpose:** Codify patterns into rule files, validate against constitutional constraints, manage configuration baselines, and audit quality.

**Execution Mode:** SEQUENTIAL within each pipeline (step 1 then step 2). Pipelines run concurrently.

**Inputs:** Phase 3 artifacts + Barrier 3 cross-pollination

#### 3.4.1 PS Pipeline -- Phase 4

| Agent ID | Role | Seq | Responsibility |
|----------|------|-----|----------------|
| ps-architect-003 | Architect | Step 1 | Create rule files: `agent-development-standards.md` and `agent-routing-standards.md` for `.context/rules/`. Incorporate synthesized patterns, ADR decisions, NSE requirements, and V&V criteria. |
| ps-validator-001 | Validator | Step 2 | Validate all rule files against Jerry constitutional constraints (H-01 through H-31). Check for tier vocabulary compliance, HARD rule count limits, cross-reference integrity. |

**Artifact Paths:**
```
orchestration/agent-patterns-20260221-001/ps/phase-4-codification/
├── ps-architect-003/
│   ├── ps-architect-003-agent-development-standards.md
│   └── ps-architect-003-agent-routing-standards.md
└── ps-validator-001/ps-validator-001-validation-report.md
```

#### 3.4.2 NSE Pipeline -- Phase 4

| Agent ID | Role | Seq | Responsibility |
|----------|------|-----|----------------|
| nse-configuration-001 | Configuration Manager | Step 1 | Configuration management for agent pattern baselines. Define versioning strategy, change control process, and baseline artifacts for the new agent development rules. |
| nse-qa-001 | QA Auditor | Step 2 | Quality assurance audit of all deliverables produced in Phases 1-4. Verify completeness, traceability (requirements to rules), and cross-document consistency. |

**Artifact Paths:**
```
orchestration/agent-patterns-20260221-001/nse/phase-4-codification/
├── nse-configuration-001/nse-configuration-001-config-baseline.md
└── nse-qa-001/nse-qa-001-qa-audit.md
```

---

### 3.5 Phase 5: Review & Quality Gate (C4 Tournament)

**Purpose:** Final review, quality scoring, and C4 adversary tournament across all deliverables.

**Execution Mode:** PARALLEL across both pipelines, followed by C4 tournament

**Inputs:** Phase 4 artifacts + Barrier 4 cross-pollination

#### 3.5.1 PS Pipeline -- Phase 5

| Agent ID | Role | Responsibility |
|----------|------|----------------|
| ps-reviewer-001 | Reviewer | Full code/design review of all rule files and templates. Check for completeness, correctness, style consistency, and adherence to Jerry conventions. |
| ps-critic-001 | Critic | Quality scoring of all C4 deliverables using S-014 LLM-as-Judge. 6-dimension rubric at >= 0.95 threshold. Creator-critic-revision cycle (up to 5 iterations). |
| ps-reporter-001 | Reporter | Final status report and project synthesis. Consolidate all findings, decisions, patterns, and quality scores into PROJ-007 completion report. |

**Artifact Paths:**
```
orchestration/agent-patterns-20260221-001/ps/phase-5-review/
├── ps-reviewer-001/ps-reviewer-001-review.md
├── ps-critic-001/
│   ├── ps-critic-001-review-r1.md
│   ├── ps-critic-001-review-r2.md
│   ├── ps-critic-001-review-r3.md
│   ├── ps-critic-001-review-r4.md  (if needed)
│   └── ps-critic-001-review-r5.md  (if needed)
└── ps-reporter-001/ps-reporter-001-final-report.md
```

#### 3.5.2 NSE Pipeline -- Phase 5

| Agent ID | Role | Responsibility |
|----------|------|----------------|
| nse-reviewer-001 | Technical Reviewer | Technical review gate (CDR-equivalent for agent patterns). Formal SE review covering requirements satisfaction, architecture compliance, risk mitigation adequacy, V&V alignment. |
| nse-reporter-001 | SE Reporter | SE status report with metrics. Coverage of requirements satisfied, risks mitigated, V&V criteria addressed. Quantitative SE health assessment. |

**Artifact Paths:**
```
orchestration/agent-patterns-20260221-001/nse/phase-5-review/
├── nse-reviewer-001/nse-reviewer-001-technical-review.md
└── nse-reporter-001/nse-reporter-001-se-report.md
```

#### 3.5.3 C4 Adversary Tournament

After both pipeline Phase 5 agents complete, the C4 adversary tournament applies all 10 selected strategies to the final deliverables (rule files, ADRs, synthesis).

**Tournament Artifact Path:**
```
orchestration/agent-patterns-20260221-001/adversary/c4-tournament/
├── s001-red-team.md
├── s002-devils-advocate.md
├── s003-steelman.md
├── s004-pre-mortem.md
├── s007-constitutional-critique.md
├── s010-self-refine.md
├── s011-chain-of-verification.md
├── s012-fmea.md
├── s013-inversion.md
├── s014-llm-as-judge.md
└── tournament-summary.md
```

---

## 4. Sync Barrier Protocol

### 4.1 Barrier Transition Rules

```
BARRIER TRANSITION PROTOCOL (Cross-Pollinated Pipeline)
=========================================================

FOR EACH BARRIER (1 through 4):

1. PRE-BARRIER CHECK
   [ ] All agents in BOTH pipelines for this phase have completed
   [ ] All phase artifacts exist and are non-empty
   [ ] No blocking errors or unresolved issues

2. CROSS-POLLINATION EXECUTION
   [ ] PS pipeline: Extract key findings, consolidate into ps-to-nse handoff
   [ ] NSE pipeline: Extract key findings, consolidate into nse-to-ps handoff
   [ ] Write handoff artifacts to cross-pollination/{barrier-N}/{direction}/

3. QUALITY GATE EVALUATION
   [ ] Barrier-specific threshold evaluation (see per-barrier definitions)
   [ ] On PASS: Update barrier status, unblock next phase
   [ ] On FAIL: Identify failing artifacts, return to source agents for revision

4. POST-BARRIER VERIFICATION
   [ ] Both pipelines acknowledge receipt of cross-pollination artifacts
   [ ] Next phase agents have cross-pollination inputs in their artifact lists
   [ ] ORCHESTRATION.yaml barrier status = COMPLETE
   [ ] Checkpoint created (trigger: BARRIER_COMPLETE)
```

### 4.2 Barrier Definitions

| Barrier | After Phase | PS to NSE Content | NSE to PS Content | Quality Gate | Status |
|---------|-------------|--------------------|--------------------|--------------|--------|
| barrier-1 | Phase 1 (Research) | 3 consolidated research reports: architecture, routing, industry patterns | Trade study findings: design alternatives with comparative analysis | Research completeness check | PENDING |
| barrier-2 | Phase 2 (Analysis) | Gap analysis + failure mode catalog + trade-off scores | Formal requirements + architecture patterns + risk register | Cross-validation: no contradictions between PS analysis and NSE requirements | PENDING |
| barrier-3 | Phase 3 (Synthesis) | Pattern synthesis + 2 ADR drafts | V&V plan + integration patterns | ADR quality >= 0.95 (AE-003 auto-C3) | PENDING |
| barrier-4 | Phase 4 (Codification) | Rule files + validation report | Config baselines + QA audit findings | Rule file quality >= 0.95 (AE-002 auto-C3+) | PENDING |

### 4.3 Cross-Pollination Artifact Schema

Each handoff artifact follows this structure:

```markdown
# Cross-Pollination Handoff: {source_pipeline} to {target_pipeline}
## Barrier: {barrier_id}
## Date: {date}

### Key Findings
{Numbered list of findings from source pipeline}

### Artifacts Referenced
{List of source artifacts with paths}

### Recommendations for Target Pipeline
{Actionable recommendations for the receiving pipeline}

### Open Questions
{Questions that need resolution by the target pipeline}
```

**Cross-Pollination Artifact Paths:**
```
orchestration/agent-patterns-20260221-001/cross-pollination/
├── barrier-1/
│   ├── ps-to-nse/handoff.md
│   └── nse-to-ps/handoff.md
├── barrier-2/
│   ├── ps-to-nse/handoff.md
│   └── nse-to-ps/handoff.md
├── barrier-3/
│   ├── ps-to-nse/handoff.md
│   └── nse-to-ps/handoff.md
└── barrier-4/
    ├── ps-to-nse/handoff.md
    └── nse-to-ps/handoff.md
```

---

## 5. Adversarial Strategy Mapping

### 5.1 Workflow Criticality: C4 (Critical)

**Justification:**
- Final deliverables include rule files for `.context/rules/` (AE-002 auto-C3 minimum)
- ADRs for architectural decisions (AE-003 auto-C3 minimum)
- Governance-shaping artifacts that define all future agent development
- Irreversible impact on framework architecture once adopted

### 5.2 C4 Tournament Configuration

| Parameter | Value |
|-----------|-------|
| Threshold | >= 0.95 weighted composite |
| Mode | Tournament (all 10 strategies) |
| Min iterations | 3 (H-14) |
| Max iterations | 5 (elevated per user request) |
| Escalation | Human escalation if max iterations exhausted without passing |
| Scoring mechanism | S-014 (LLM-as-Judge) with 6-dimension rubric |

### 5.3 Strategy Application Sequence (C4)

Per H-16, S-003 (Steelman) MUST precede S-002 (Devil's Advocate).

```
CORRECT C4 Tournament Sequence:
  1. S-010 Self-Refine (creator self-review)
  2. S-003 Steelman (strengthen before critique) -- H-16 mandatory ordering
  3. S-002 Devil's Advocate (challenge assumptions) -- after S-003 per H-16
  4. S-007 Constitutional AI Critique (governance compliance)
  5. S-004 Pre-Mortem Analysis (what could go wrong post-adoption?)
  6. S-012 FMEA (failure mode and effect analysis on patterns)
  7. S-013 Inversion Technique (what would bad agent patterns look like?)
  8. S-011 Chain-of-Verification (verify factual claims)
  9. S-001 Red Team Analysis (attack the rules from adversary perspective)
 10. S-014 LLM-as-Judge (final composite scoring)
```

### 5.4 Quality Score Dimensions (S-014)

| Dimension | Weight | Description |
|-----------|--------|-------------|
| Completeness | 0.20 | All required patterns, rules, and guides present |
| Internal Consistency | 0.20 | No contradictions across rule files, ADRs, and guides |
| Methodological Rigor | 0.20 | Sound reasoning from research through codification |
| Evidence Quality | 0.15 | Claims supported by research, citations, and examples |
| Actionability | 0.15 | Rules can be applied by agent developers immediately |
| Traceability | 0.10 | Requirements to patterns to rules to ADR decisions |

### 5.5 Intermediate Quality Gates (Barriers 3 and 4)

ADR and rule file artifacts receive intermediate quality scoring at Barriers 3 and 4 to catch quality issues early:

| Barrier | Artifact Type | Threshold | Strategies Applied |
|---------|---------------|-----------|-------------------|
| Barrier 3 | ADRs (ps-architect-001, ps-architect-002) | >= 0.95 | S-010, S-003, S-002, S-007, S-014 (C3 subset) |
| Barrier 4 | Rule files (ps-architect-003) | >= 0.95 | S-010, S-003, S-002, S-007, S-004, S-012, S-013, S-014 (C3+ subset) |

---

## 6. Agent Registry

### 6.1 Complete Agent Registry (All 19 Agents)

| # | Agent ID | Pipeline | Phase | Role | Input Artifacts | Output Artifact |
|---|----------|----------|-------|------|-----------------|-----------------|
| 1 | ps-researcher-001 | PS | 1 | Researcher | PLAN.md, existing agents in `skills/` | `ps/phase-1-research/ps-researcher-001/ps-researcher-001-research.md` |
| 2 | ps-researcher-002 | PS | 1 | Researcher | PLAN.md, existing routing patterns | `ps/phase-1-research/ps-researcher-002/ps-researcher-002-research.md` |
| 3 | ps-researcher-003 | PS | 1 | Researcher | PLAN.md, framework docs | `ps/phase-1-research/ps-researcher-003/ps-researcher-003-research.md` |
| 4 | nse-explorer-001 | NSE | 1 | Explorer | PLAN.md, research questions | `nse/phase-1-research/nse-explorer-001/nse-explorer-001-exploration.md` |
| 5 | ps-analyst-001 | PS | 2 | Analyst | Phase 1 artifacts + Barrier 1 nse-to-ps | `ps/phase-2-analysis/ps-analyst-001/ps-analyst-001-analysis.md` |
| 6 | ps-analyst-002 | PS | 2 | Analyst | Phase 1 artifacts + Barrier 1 nse-to-ps | `ps/phase-2-analysis/ps-analyst-002/ps-analyst-002-analysis.md` |
| 7 | ps-investigator-001 | PS | 2 | Investigator | Phase 1 artifacts + Barrier 1 nse-to-ps | `ps/phase-2-analysis/ps-investigator-001/ps-investigator-001-investigation.md` |
| 8 | nse-requirements-001 | NSE | 2 | Requirements | Phase 1 artifacts + Barrier 1 ps-to-nse | `nse/phase-2-analysis/nse-requirements-001/nse-requirements-001-requirements.md` |
| 9 | nse-architecture-001 | NSE | 2 | Architecture | Phase 1 artifacts + Barrier 1 ps-to-nse | `nse/phase-2-analysis/nse-architecture-001/nse-architecture-001-architecture.md` |
| 10 | nse-risk-001 | NSE | 2 | Risk | Phase 1 artifacts + Barrier 1 ps-to-nse | `nse/phase-2-analysis/nse-risk-001/nse-risk-001-risk-assessment.md` |
| 11 | ps-synthesizer-001 | PS | 3 | Synthesizer | Phase 2 artifacts + Barrier 2 nse-to-ps | `ps/phase-3-synthesis/ps-synthesizer-001/ps-synthesizer-001-synthesis.md` |
| 12 | ps-architect-001 | PS | 3 | Architect | Phase 2 artifacts + synthesis + Barrier 2 nse-to-ps | `ps/phase-3-synthesis/ps-architect-001/ps-architect-001-adr-agent-design.md` |
| 13 | ps-architect-002 | PS | 3 | Architect | Phase 2 artifacts + synthesis + Barrier 2 nse-to-ps | `ps/phase-3-synthesis/ps-architect-002/ps-architect-002-adr-routing-triggers.md` |
| 14 | nse-verification-001 | NSE | 3 | Verification | Phase 2 artifacts + Barrier 2 ps-to-nse | `nse/phase-3-synthesis/nse-verification-001/nse-verification-001-vv-plan.md` |
| 15 | nse-integration-001 | NSE | 3 | Integration | Phase 2 artifacts + Barrier 2 ps-to-nse | `nse/phase-3-synthesis/nse-integration-001/nse-integration-001-integration-patterns.md` |
| 16 | ps-architect-003 | PS | 4 | Architect | Phase 3 artifacts + Barrier 3 nse-to-ps | `ps/phase-4-codification/ps-architect-003/ps-architect-003-agent-development-standards.md`, `ps-architect-003-agent-routing-standards.md` |
| 17 | ps-validator-001 | PS | 4 | Validator | ps-architect-003 rule files | `ps/phase-4-codification/ps-validator-001/ps-validator-001-validation-report.md` |
| 18 | nse-configuration-001 | NSE | 4 | Configuration | Phase 3 artifacts + Barrier 3 ps-to-nse | `nse/phase-4-codification/nse-configuration-001/nse-configuration-001-config-baseline.md` |
| 19 | nse-qa-001 | NSE | 4 | QA | All Phase 1-4 artifacts | `nse/phase-4-codification/nse-qa-001/nse-qa-001-qa-audit.md` |
| 20 | ps-reviewer-001 | PS | 5 | Reviewer | All rule files + ADRs | `ps/phase-5-review/ps-reviewer-001/ps-reviewer-001-review.md` |
| 21 | ps-critic-001 | PS | 5 | Critic | All C4 deliverables | `ps/phase-5-review/ps-critic-001/ps-critic-001-review-r{N}.md` |
| 22 | ps-reporter-001 | PS | 5 | Reporter | All artifacts + scores | `ps/phase-5-review/ps-reporter-001/ps-reporter-001-final-report.md` |
| 23 | nse-reviewer-001 | NSE | 5 | Technical Reviewer | All deliverables + requirements | `nse/phase-5-review/nse-reviewer-001/nse-reviewer-001-technical-review.md` |
| 24 | nse-reporter-001 | NSE | 5 | SE Reporter | All NSE artifacts + metrics | `nse/phase-5-review/nse-reporter-001/nse-reporter-001-se-report.md` |

> **Note:** Agent types 12-13 (ps-architect) and 16 (ps-architect) represent the same agent type (`ps-architect`) used across Phases 3 and 4 with different instance IDs (001, 002, 003). This reflects the specification that each of the 9 PS agent types is used at least once, with `ps-architect` used 3 times and `ps-researcher` used 3 times.

### 6.2 Agent Count Summary

| Pipeline | Phase 1 | Phase 2 | Phase 3 | Phase 4 | Phase 5 | Total |
|----------|---------|---------|---------|---------|---------|-------|
| PS | 3 | 3 | 3 | 2 | 3 | 14 |
| NSE | 1 | 3 | 2 | 2 | 2 | 10 |
| **Total** | **4** | **6** | **5** | **4** | **5** | **24** |

> 24 agent instances using 19 distinct agent types (ps-researcher x3, ps-architect x3, rest x1 each).

---

## 7. State Management

### 7.1 State Files

| File | Purpose |
|------|---------|
| `ORCHESTRATION.yaml` | Machine-readable state (SSOT) -- load first at resumption |
| `ORCHESTRATION_PLAN.md` | This file -- strategic context, diagrams, phase details |
| `WORKTRACKER.md` | Project-level task tracking |

### 7.2 Artifact Path Structure

All artifacts are stored under the workflow base path using dynamic identifiers:

```
projects/PROJ-007-agent-patterns/orchestration/agent-patterns-20260221-001/
├── ps/                                      # PS pipeline artifacts
│   ├── phase-1-research/
│   │   ├── ps-researcher-001/
│   │   │   └── ps-researcher-001-research.md
│   │   ├── ps-researcher-002/
│   │   │   └── ps-researcher-002-research.md
│   │   └── ps-researcher-003/
│   │       └── ps-researcher-003-research.md
│   ├── phase-2-analysis/
│   │   ├── ps-analyst-001/
│   │   │   └── ps-analyst-001-analysis.md
│   │   ├── ps-analyst-002/
│   │   │   └── ps-analyst-002-analysis.md
│   │   └── ps-investigator-001/
│   │       └── ps-investigator-001-investigation.md
│   ├── phase-3-synthesis/
│   │   ├── ps-synthesizer-001/
│   │   │   └── ps-synthesizer-001-synthesis.md
│   │   ├── ps-architect-001/
│   │   │   └── ps-architect-001-adr-agent-design.md
│   │   └── ps-architect-002/
│   │       └── ps-architect-002-adr-routing-triggers.md
│   ├── phase-4-codification/
│   │   ├── ps-architect-003/
│   │   │   ├── ps-architect-003-agent-development-standards.md
│   │   │   └── ps-architect-003-agent-routing-standards.md
│   │   └── ps-validator-001/
│   │       └── ps-validator-001-validation-report.md
│   └── phase-5-review/
│       ├── ps-reviewer-001/
│       │   └── ps-reviewer-001-review.md
│       ├── ps-critic-001/
│       │   └── ps-critic-001-review-r{N}.md
│       └── ps-reporter-001/
│           └── ps-reporter-001-final-report.md
├── nse/                                     # NSE pipeline artifacts
│   ├── phase-1-research/
│   │   └── nse-explorer-001/
│   │       └── nse-explorer-001-exploration.md
│   ├── phase-2-analysis/
│   │   ├── nse-requirements-001/
│   │   │   └── nse-requirements-001-requirements.md
│   │   ├── nse-architecture-001/
│   │   │   └── nse-architecture-001-architecture.md
│   │   └── nse-risk-001/
│   │       └── nse-risk-001-risk-assessment.md
│   ├── phase-3-synthesis/
│   │   ├── nse-verification-001/
│   │   │   └── nse-verification-001-vv-plan.md
│   │   └── nse-integration-001/
│   │       └── nse-integration-001-integration-patterns.md
│   ├── phase-4-codification/
│   │   ├── nse-configuration-001/
│   │   │   └── nse-configuration-001-config-baseline.md
│   │   └── nse-qa-001/
│   │       └── nse-qa-001-qa-audit.md
│   └── phase-5-review/
│       ├── nse-reviewer-001/
│       │   └── nse-reviewer-001-technical-review.md
│       └── nse-reporter-001/
│           └── nse-reporter-001-se-report.md
├── cross-pollination/                       # Barrier handoff artifacts
│   ├── barrier-1/
│   │   ├── ps-to-nse/handoff.md
│   │   └── nse-to-ps/handoff.md
│   ├── barrier-2/
│   │   ├── ps-to-nse/handoff.md
│   │   └── nse-to-ps/handoff.md
│   ├── barrier-3/
│   │   ├── ps-to-nse/handoff.md
│   │   └── nse-to-ps/handoff.md
│   └── barrier-4/
│       ├── ps-to-nse/handoff.md
│       └── nse-to-ps/handoff.md
├── adversary/                               # C4 tournament artifacts
│   └── c4-tournament/
│       ├── s001-red-team.md
│       ├── s002-devils-advocate.md
│       ├── s003-steelman.md
│       ├── s004-pre-mortem.md
│       ├── s007-constitutional-critique.md
│       ├── s010-self-refine.md
│       ├── s011-chain-of-verification.md
│       ├── s012-fmea.md
│       ├── s013-inversion.md
│       ├── s014-llm-as-judge.md
│       └── tournament-summary.md
└── synthesis/                               # Final synthesis
    └── final-synthesis.md
```

**Path Pattern:**
- Pipeline artifacts: `orchestration/{workflow.id}/{pipeline_alias}/phase-{N}-{name}/{agent_id}/{agent_id}-{artifact_type}.md`
- Cross-pollination: `orchestration/{workflow.id}/cross-pollination/{barrier_id}/{direction}/handoff.md`
- Adversary: `orchestration/{workflow.id}/adversary/c4-tournament/{strategy-slug}.md`
- Synthesis: `orchestration/{workflow.id}/synthesis/final-synthesis.md`

### 7.3 Checkpoint Strategy

| Trigger | When | Purpose |
|---------|------|---------|
| PHASE_COMPLETE | After each of 5 phases (per pipeline) | Phase-level rollback point |
| BARRIER_COMPLETE | After each of 4 sync barriers | Cross-pollination recovery |
| TOURNAMENT_ROUND | After each C4 tournament iteration | Tournament iteration recovery |
| MANUAL | User-triggered | Debug and inspection |

---

## 8. Execution Constraints

### 8.1 Hard Constraints (Jerry Constitution)

| Constraint | ID | Enforcement |
|------------|----|----|
| Single agent nesting | P-003 / H-01 | Orchestrator delegates to workers only; no recursive subagents |
| File persistence | P-002 | All state and artifacts written to filesystem |
| No deception | P-022 / H-03 | Transparent reasoning; scores reported as-is |
| User authority | P-020 / H-02 | User approves any gate escalation beyond max retries |
| Quality threshold | H-13 | >= 0.95 for all deliverables (C4 elevated from standard 0.92) |
| Creator-critic cycles | H-14 | Minimum 3 iterations for C2+ (extended to 5 max for C4) |
| Self-review first | H-15 | S-010 before presenting to critic |
| Steelman before Devil's Advocate | H-16 | S-003 before S-002 in all review chains |
| Quality scoring required | H-17 | S-014 for all deliverables |
| Constitutional compliance | H-18 | S-007 for all deliverables |
| Governance escalation | H-19 | AE-002 (rules files) and AE-003 (ADRs) enforced |
| Proactive skill invocation | H-22 | /adversary, /problem-solving, /nasa-se invoked early |
| Navigation tables | H-23 | All markdown files >30 lines include navigation table |
| Anchor links | H-24 | Navigation table section names use anchor links |
| UV only | H-05 / H-06 | All Python via `uv run`; deps via `uv add` |
| Clarify when ambiguous | H-31 | Ask before acting when multiple interpretations exist |

### 8.1.1 Worktracker Entity Templates

> **WTI-007:** Entity files created during orchestration MUST use canonical templates from `.context/templates/worktracker/`.

### 8.2 Soft Constraints

| Constraint | Value | Rationale |
|------------|-------|-----------|
| Max concurrent agents | 4 | Phase 1 has max 4 parallel agents (3 PS + 1 NSE) |
| Max barrier retries | 2 | Beyond minimum iterations; circuit breaker |
| Checkpoint frequency | PHASE + BARRIER + TOURNAMENT | Recovery at all major transitions |
| Max C4 tournament iterations | 5 | Elevated from standard 3 per user request |
| Context7 call limit | Per-question limit enforced by tool | Respect tool-enforced limits; fall back to WebSearch |

---

## 9. Success Criteria

### 9.1 Phase 1 Exit Criteria

| Criterion | Validation |
|-----------|------------|
| All 3 PS research artifacts complete | `ps-researcher-001/002/003-research.md` exist and are non-empty |
| NSE exploration artifact complete | `nse-explorer-001-exploration.md` exists and is non-empty |
| Each research artifact covers its assigned topic | Content review at barrier |
| Context7 and/or WebSearch used for external library research | MCP-001 compliance |

### 9.2 Phase 2 Exit Criteria

| Criterion | Validation |
|-----------|------------|
| 2 PS analysis artifacts and 1 PS investigation artifact complete | Files exist and are non-empty |
| NSE requirements document with shall-statements produced | `nse-requirements-001-requirements.md` contains SHALL/MUST/SHOULD statements |
| NSE architecture patterns documented | `nse-architecture-001-architecture.md` exists |
| NSE risk register produced | `nse-risk-001-risk-assessment.md` contains risk register table |
| Cross-pollination inputs from Barrier 1 incorporated | Analysis references Phase 1 findings from both pipelines |

### 9.3 Phase 3 Exit Criteria

| Criterion | Validation |
|-----------|------------|
| Pattern synthesis document consolidates all research/analysis | `ps-synthesizer-001-synthesis.md` references Phase 1 + Phase 2 artifacts |
| 2 ADRs produced (agent design + routing/triggers) | `ps-architect-001-adr-*.md` and `ps-architect-002-adr-*.md` exist |
| ADRs achieve >= 0.95 at Barrier 3 quality gate | Barrier 3 quality score recorded in ORCHESTRATION.yaml |
| V&V plan produced with verifiable criteria | `nse-verification-001-vv-plan.md` contains test strategies |
| Integration patterns documented | `nse-integration-001-integration-patterns.md` exists |

### 9.4 Phase 4 Exit Criteria

| Criterion | Validation |
|-----------|------------|
| 2 rule files created for `.context/rules/` | `agent-development-standards.md` and `agent-routing-standards.md` exist |
| Rule files pass constitutional validation | `ps-validator-001-validation-report.md` shows PASS |
| Rule files achieve >= 0.95 at Barrier 4 quality gate | Barrier 4 quality score recorded |
| Config baselines documented | `nse-configuration-001-config-baseline.md` exists |
| QA audit complete with no blocking findings | `nse-qa-001-qa-audit.md` shows no CRITICAL findings |

### 9.5 Phase 5 Exit Criteria

| Criterion | Validation |
|-----------|------------|
| PS review complete | `ps-reviewer-001-review.md` exists |
| PS quality scoring complete (>= 0.95) | `ps-critic-001-review-r{N}.md` final score >= 0.95 |
| PS final report complete | `ps-reporter-001-final-report.md` exists |
| NSE technical review complete | `nse-reviewer-001-technical-review.md` exists |
| NSE SE report complete | `nse-reporter-001-se-report.md` exists |
| C4 tournament passed | Tournament summary shows >= 0.95 composite score |

### 9.6 Workflow Completion Criteria

| Criterion | Validation |
|-----------|------------|
| All 24 agent instances executed | ORCHESTRATION.yaml agents_executed = 24 |
| All 4 barriers crossed | All barrier statuses = COMPLETE |
| C4 tournament passed at >= 0.95 | Tournament summary composite >= 0.95 |
| Rule files committed to `.context/rules/` | Files exist at final destination |
| ADRs committed to `docs/design/` | ADR files exist at final destination |
| WORKTRACKER.md updated | All work items tracked with completion status |
| Final synthesis produced | `synthesis/final-synthesis.md` exists |

---

## 10. Risk Mitigations

| Risk | Likelihood | Impact | Mitigation |
|------|------------|--------|------------|
| Context window exhaustion during C4 tournament (10 strategies on multiple artifacts) | H | H | Checkpoint after each tournament iteration. Summarize prior iterations for next. Use AE-006 escalation if compaction triggered at C3+. |
| Cross-pollination handoffs lose fidelity between pipelines | M | H | Structured handoff schema with required sections. Receiving pipeline explicitly references handoff in its artifacts. |
| Research agents use training data instead of current docs for framework patterns | H | H | MCP-001 mandates Context7 for library docs. WebSearch mandatory for external patterns. Citation required per P-022. |
| ADR quality gate at Barrier 3 repeatedly fails, exhausting iterations | M | M | Max 2 retries beyond minimum 3. If still failing, escalate to user for scope reduction or acceptance of lower threshold. |
| Rule files conflict with existing `.context/rules/` conventions | M | H | ps-validator-001 explicitly validates against all existing rules. nse-qa-001 cross-audits. Reviewer agents verify integration. |
| NSE requirements over-constrain, making rules impractical | M | M | Cross-pollination at Barrier 2 feeds PS practical analysis into NSE requirements. Steelman (S-003) applied to requirements before critique. |
| 19-agent workflow overwhelms single orchestrator context | M | H | Phased execution with checkpoints. Each phase loads only its required artifacts. ORCHESTRATION.yaml is resumption SSOT. |
| Quality gate cycling at 0.95 threshold is harder to achieve than standard 0.92 | H | M | 5 iterations allowed (vs standard 3). Intermediate quality gates at Barriers 3 and 4 catch issues early. Score trajectory tracked. |
| Scaffolded directory structure has unused directories from flat generation | L | L | Plan documents canonical paths. Unused directories are harmless. Agents write to specified paths only. |

---

## 11. Resumption Context

### 11.1 Current Execution State

```
WORKFLOW STATUS AS OF 2026-02-21
==================================

Workflow ID: agent-patterns-20260221-001
Pattern:     Cross-Pollinated Dual Pipeline
Pipelines:   PS (problem-solving) + NSE (nasa-se)
Criticality: C4 (Critical)
Quality Threshold: >= 0.95

Phase 1 (Research):
  PS Pipeline:
    ps-researcher-001:   PENDING
    ps-researcher-002:   PENDING
    ps-researcher-003:   PENDING
  NSE Pipeline:
    nse-explorer-001:    PENDING

Barrier 1:                 PENDING

Phase 2 (Analysis):        BLOCKED (awaiting Barrier 1)
  PS Pipeline:
    ps-analyst-001:      BLOCKED
    ps-analyst-002:      BLOCKED
    ps-investigator-001: BLOCKED
  NSE Pipeline:
    nse-requirements-001: BLOCKED
    nse-architecture-001: BLOCKED
    nse-risk-001:        BLOCKED

Barrier 2:                 BLOCKED

Phase 3 (Synthesis):       BLOCKED (awaiting Barrier 2)
  PS Pipeline:
    ps-synthesizer-001:  BLOCKED
    ps-architect-001:    BLOCKED
    ps-architect-002:    BLOCKED
  NSE Pipeline:
    nse-verification-001: BLOCKED
    nse-integration-001: BLOCKED

Barrier 3:                 BLOCKED

Phase 4 (Codification):   BLOCKED (awaiting Barrier 3)
  PS Pipeline:
    ps-architect-003:    BLOCKED
    ps-validator-001:    BLOCKED
  NSE Pipeline:
    nse-configuration-001: BLOCKED
    nse-qa-001:          BLOCKED

Barrier 4:                 BLOCKED

Phase 5 (Review):          BLOCKED (awaiting Barrier 4)
  PS Pipeline:
    ps-reviewer-001:     BLOCKED
    ps-critic-001:       BLOCKED
    ps-reporter-001:     BLOCKED
  NSE Pipeline:
    nse-reviewer-001:    BLOCKED
    nse-reporter-001:    BLOCKED

C4 Tournament:             BLOCKED (awaiting Phase 5)
```

### 11.2 Next Actions

1. **Execute Phase 1 PS pipeline:** Launch ps-researcher-001, ps-researcher-002, and ps-researcher-003 in parallel. Use Context7 for Claude Code SDK, LangGraph, CrewAI, AutoGen docs. Use WebSearch for current patterns and community best practices.
2. **Execute Phase 1 NSE pipeline:** Launch nse-explorer-001 concurrently with PS researchers. Divergent exploration of design alternatives.
3. **After Phase 1 complete:** Execute Barrier 1 cross-pollination. Write ps-to-nse and nse-to-ps handoff artifacts.
4. **After Barrier 1:** Unlock Phase 2 and execute 6 agents in parallel (3 PS + 3 NSE).

### 11.3 Files to Load at Session Resumption

| File | Purpose |
|------|---------|
| `projects/PROJ-007-agent-patterns/ORCHESTRATION.yaml` | Machine-readable state (SSOT) -- load first |
| `projects/PROJ-007-agent-patterns/ORCHESTRATION_PLAN.md` | This file -- strategic context |
| `projects/PROJ-007-agent-patterns/WORKTRACKER.md` | Task tracking |
| `projects/PROJ-007-agent-patterns/PLAN.md` | Project plan |

---

*Document ID: PROJ-007-ORCH-PLAN*
*Workflow ID: agent-patterns-20260221-001*
*Version: 2.0*
*Cross-Session Portable: All paths are repository-relative*
*Generated by: orch-planner v2.2.0*
